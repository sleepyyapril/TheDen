<!--
SPDX-FileCopyrightText: 2024 Milon
SPDX-FileCopyrightText: 2025 BlitzTheSquishy
SPDX-FileCopyrightText: 2025 EvaisaDev
SPDX-FileCopyrightText: 2025 corresp0nd
SPDX-FileCopyrightText: 2025 sleepyyapril
SPDX-FileCopyrightText: 2025 taydeo

SPDX-License-Identifier: AGPL-3.0-or-later AND MIT
-->

<cartridges:NanoChatMessageBubble
    xmlns="https://spacestation14.io"
    xmlns:cartridges="clr-namespace:Content.Client._DV.CartridgeLoader.Cartridges"
    xmlns:graphics="clr-namespace:Robust.Client.Graphics;assembly=Robust.Client"
    HorizontalExpand="True">

    <BoxContainer Name="MessageContainer"
                  Orientation="Horizontal"
                  HorizontalExpand="True">
        <!-- Left spacer for other's messages -->
        <Control Name="LeftSpacer"
                 MinSize="12 0" />

        <!--  Message panel  -->
        <BoxContainer
            HorizontalExpand="True"
            MaxWidth="320"
            Name="MessageBox"
            Orientation="Vertical">

            <!-- Funky Station - Added sender name label -->
            <Label
                HorizontalAlignment="Left"
                Margin="10,0,10,2"
                Name="SenderNameLabel"
                StyleClasses="LabelSmall"
                Visible="False" />

            <PanelContainer
                HorizontalExpand="True"
                MaxWidth="320"
                Name="MessagePanel">
                <PanelContainer.PanelOverride>
                    <graphics:StyleBoxFlat
                        ContentMarginLeftOverride="10"
                        ContentMarginRightOverride="10"
                        ContentMarginTopOverride="6"
                        ContentMarginBottomOverride="6"
                        BorderThickness="1">
                        <!-- Colors set in code based on message sender -->
                    </graphics:StyleBoxFlat>
                </PanelContainer.PanelOverride>

                <RichTextLabel Name="MessageText"
                               HorizontalExpand="True" />
            </PanelContainer>

            <!-- Delivery failed text -->
            <Label Name="DeliveryFailedLabel"
                   Text="{Loc nano-chat-delivery-failed}"
                   StyleClasses="LabelSmall"
                   HorizontalExpand="True"
                   HorizontalAlignment="Right"
                   Margin="10 2 10 0"
                   Visible="False" />
        </BoxContainer>

        <!-- Right spacer for own messages -->
        <Control Name="RightSpacer"
                 MinSize="12 0" />

        <!-- Flexible space for alignment -->
        <Control Name="FlexSpace"
                 HorizontalExpand="True" />
    </BoxContainer>
</cartridges:NanoChatMessageBubble>
