# SPDX-FileCopyrightText: 2025 Eris
# SPDX-FileCopyrightText: 2025 Jakumba
# SPDX-FileCopyrightText: 2025 MajorMoth
# SPDX-FileCopyrightText: 2025 Rosycup
# SPDX-FileCopyrightText: 2025 bigsantino1
# SPDX-FileCopyrightText: 2025 oberonics
# SPDX-FileCopyrightText: 2025 sleepyyapril
# SPDX-FileCopyrightText: 2025 wheelwrightt
# SPDX-FileCopyrightText: 2026 Tomce795
#
# SPDX-License-Identifier: AGPL-3.0-or-later AND MIT

- type: entity
  parent: [ BaseSalvageSpecialistContraband, BaseItem ]
  id: LavalandWeaponKineticBase
  abstract: true
  components:
  - type: Tag
    tags:
      - Pickaxe
  - type: Sprite
    sprite: _Lavaland/Objects/Weapons/Crushers/crusher_spear.rsi
    state: icon
  - type: AmmoCounter
  - type: UseDelayOnShoot
  - type: UseDelay
    delay: 0.9
  - type: Gun
    soundGunshot: /Audio/Weapons/plasma_cutter.ogg
    fireRate: 1
    useKey: false
  - type: RechargeBasicEntityAmmo
    rechargeCooldown: 0.5
    rechargeSound:
      path: /Audio/Weapons/Guns/MagIn/kinetic_reload.ogg
  - type: BasicEntityAmmoProvider
    proto: BulletCharge
    capacity: 1
    count: 1
  - type: DisarmMalus
  - type: MegafaunaWeaponLooter
  - type: Clothing
    quickEquip: false
    slots:
    - back
    - suitStorage
    - belt
  - type: ExtendDescription
    descriptionList:
      - description: "gun-legality-salvage"
        fontSize: 12
        color: "#ff4f00"
        requireDetailRange: false

- type: entity
  parent: [LavalandWeaponKineticBase]
  id: LavalandWeaponKineticSpear
  name: kinetic spear
  description: A long-ranged melee weapon. Deals less damage than a normal crusher, but has longer attack range.
  components:
  - type: Tag
    tags:
      - Pickaxe
  - type: Sprite
    sprite: _Lavaland/Objects/Weapons/Crushers/crusher_spear.rsi
    state: icon
  - type: AmmoCounter
  - type: UseDelayOnShoot
  - type: UseDelay
    delay: 0.9
  - type: Gun
    soundGunshot: /Audio/Weapons/plasma_cutter.ogg
    fireRate: 1
    useKey: false
  - type: RechargeBasicEntityAmmo
    rechargeSound:
      path: /Audio/Weapons/Guns/MagIn/kinetic_reload.ogg
    rechargeCooldown: 0.5
  - type: BasicEntityAmmoProvider
    proto: BulletCharge
    capacity: 1
    count: 1
  - type: MeleeWeapon
    attackRate: 0.8
    range: 2.1 # Den Change insanner reach
    wideAnimationRotation: -135
    damage:
      types:
        Blunt: 10
        Slash: 10
    soundHit:
      collection: MetalThud
    angle: 0
    animation: WeaponArcThrust
  - type: GunRequiresWield
  - type: Item
    size: Ginormous
    sprite: _Lavaland/Objects/Weapons/Crushers/crusher_spear-inhands.rsi
  - type: DisarmMalus
  - type: Wieldable
  - type: Sharp
  - type: MeleeRequiresWield
    fumbleOnAttempt: true
    # Den Change Start - commenting out backstab for clarity, not using this system. Oh and now you can embed the spear
  - type: DamageOtherOnHit
    staminaCost: 6
  - type: EmbeddableProjectile
  - type: EmbedPassiveDamage
  - type: ThrowingAngle
    angle: 225
  - type: LandAtCursor
  - type: DamageBoostOnMarker
    boost:
      types: # Totals to 60 damage when hitting marked targets
        Blunt: 35
        Slash: 25
    # backstabBoost: # And 20 extra for a backstab. Adding up to 80
    #   types:
    #     Blunt: 11
    #     Slash: 9
    # Den Change End
  - type: LeechOnMarker
    leech:
      groups:
        Brute: -10
        Burn: -5

- type: entity
  parent: LavalandWeaponKineticBase
  id: LavalandWeaponKineticHammer
  name: kinetic hammer
  description: A beefy, two-handed weapon that inflicts knockback and heavier damage than a crusher.
  components:
  - type: Sprite
    sprite: _Lavaland/Objects/Weapons/Crushers/crusher_hammer.rsi
    state: icon
  - type: UseDelay
    delay: 1
  - type: MeleeWeapon
    attackRate: 1.25 #Den change
    wideAnimationRotation: -135
    damage:
      types:
        Blunt: 25
        Structural: 30 #Den Change
    soundHit:
      collection: MetalThud
    angle: 120 #Den Change
    animation: WeaponArcThrust
    range: 1.6
    # Den changes start
    heavyOnLightMiss: true
    heavyRateModifier: 1
    heavyDamageBaseModifier: 1
    heavyStaminaCost: 10
    # Den changes end
  - type: Item
    size: Ginormous
    sprite: _Lavaland/Objects/Weapons/Crushers/crusher_hammer-inhands.rsi
  - type: MeleeThrowOnHit
    speed: 5
    lifetime: 0.5
 #- type: FlipOnHit
  - type: GunRequiresWield
  - type: Wieldable
  - type: MeleeRequiresWield
    fumbleOnAttempt: true
  - type: DamageBoostOnMarker
    boost:
      types: # BLOOD FOR THE BLOOD GOD ITS A FUCKING HAMMER
        Blunt: 75
    # Den changes start - hammer go BONK
  - type: DamageOtherOnHit
    damage:
      types:
        Blunt: 40
    staminaCost: 60
    #Dne Changes stop

- type: entity
  parent: [LavalandWeaponKineticBase, ClothingHandsBase]
  id: LavalandWeaponKineticClaws
  name: kinetic claw # Den Change: Kinetic Claws to Kinetic Claw
  description: Unleash your inner edgelord with this one-handed claw small enough to fit in your backpack. Deals a lot more damage when backstabbing marked targets.
  components:
  - type: Sprite
    sprite: _Lavaland/Objects/Weapons/Crushers/crusher_claws.rsi
    state: icon
  - type: UseDelay
    delay: 1
  - type: Clothing
    sprite: _Lavaland/Objects/Weapons/Crushers/crusher_claws-inhands.rsi
  - type: Fiber
    fiberMaterial: fibers-kinetic
    fiberColor: fibers-purple
  - type: MeleeWeapon
    attackRate: 0.33 #Den Change
    wideAnimationRotation: -315 #Den Change
    damage:
      types:
        Slash: 5
    soundHit:
      collection: MetalThud
    angle: 30
    animation: WeaponArcThrust
    range: 1.6
    # Den changes start
    heavyOnLightMiss: true
    heavyRateModifier: 1
    heavyDamageBaseModifier: 1
    heavyStaminaCost: 2
    # mustBeEquippedToUse: true | Den Change: Fix kinetic claw
  - type: Gun
    availableModes: 2
    selectedMode: 2
  - type: BasicEntityAmmoProvider
    proto: BulletCharge
    capacity: 3
    count: 3
    # Den Change End
  - type: Item
    size: Normal
    sprite: _Lavaland/Objects/Weapons/Crushers/crusher_claws-inhands.rsi
  - type: Sharp
    # Den Change Start - commenting out backstab for clarity, not using this system
  - type: DamageBoostOnMarker
    boost:
      types: # Totals to 65 damage when hitting marked targets
        Slash: 35
        Blunt: 25
    # Den Change Start - commenting out for clarity, not using this system
    # backstabBoost: # And 120 extra for a backstab. Adding up to 165!!!
    #   types:
    #     Slash: 75
    #     Blunt: 45
    # Den Change End

- type: entity
  parent: LavalandWeaponKineticBase
  id: LavalandWeaponKineticMachete
  name: kinetic machete
  description: A smaller, one-handed variant of the crusher which allows you to block attacks.
  components:
  - type: Sprite
    sprite: _Lavaland/Objects/Weapons/Crushers/crusher_machete.rsi
    state: icon
  - type: UseDelay
    delay: 1
  - type: MeleeWeapon
    attackRate: 1.0 # slightly slower than a combat/utility knife, but in return is slightly stronger than one
    damage:
      types:
        Slash: 12.5
    soundHit:
      collection: MetalThud
    angle: 30
    wideAnimationRotation: -135
    animation: WeaponArcThrust
    range: 1.6
    # Den changes start
    heavyOnLightMiss: true
    heavyRateModifier: 1
    heavyDamageBaseModifier: 1
    heavyStaminaCost: 5
    # Den changes end
  - type: Item
    size: Ginormous
    sprite: _Lavaland/Objects/Weapons/Crushers/crusher_machete-inhands.rsi
  # too lazy to port parrying and risk a [redacted] lmao
  - type: Sharp
  # Den Change Start - commenting out backstab for clarity, not using this system
  - type: DamageOtherOnHit
    staminaCost: 5
  - type: EmbeddableProjectile
  - type: EmbedPassiveDamage
  - type: DamageBoostOnMarker
    boost:
      types: # Totals to 75 damage when hitting marked targets
        Slash: 42.5
        Blunt: 20
    # backstabBoost: # And 20 extra for a backstab
    #   types:
    #     Slash: 15
    #     Blunt: 5
  - type: BlockCharge
    rechargeTime: 60
    markerReductionTime: 20
  # Den Change End
