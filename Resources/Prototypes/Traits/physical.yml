# SPDX-FileCopyrightText: 2024 DEATHB4DEFEAT
# SPDX-FileCopyrightText: 2024 FoxxoTrystan
# SPDX-FileCopyrightText: 2024 Memeji
# SPDX-FileCopyrightText: 2024 ShatteredSwords
# SPDX-FileCopyrightText: 2024 Timemaster99
# SPDX-FileCopyrightText: 2024 fox
# SPDX-FileCopyrightText: 2025 Blitz
# SPDX-FileCopyrightText: 2025 BloodfiendishOperator
# SPDX-FileCopyrightText: 2025 BramvanZijp
# SPDX-FileCopyrightText: 2025 EctoplasmIsGood
# SPDX-FileCopyrightText: 2025 Falcon
# SPDX-FileCopyrightText: 2025 Jakumba
# SPDX-FileCopyrightText: 2025 M3739
# SPDX-FileCopyrightText: 2025 MajorMoth
# SPDX-FileCopyrightText: 2025 Raikyr0
# SPDX-FileCopyrightText: 2025 Rosycup
# SPDX-FileCopyrightText: 2025 SX-7
# SPDX-FileCopyrightText: 2025 Sapphire
# SPDX-FileCopyrightText: 2025 Sir Warock
# SPDX-FileCopyrightText: 2025 Skubman
# SPDX-FileCopyrightText: 2025 Tabitha
# SPDX-FileCopyrightText: 2025 TheOneTrueWolfio
# SPDX-FileCopyrightText: 2025 VMSolidus
# SPDX-FileCopyrightText: 2025 foxcurl
# SPDX-FileCopyrightText: 2025 juniwoofs
# SPDX-FileCopyrightText: 2025 portfiend
# SPDX-FileCopyrightText: 2025 sheepie
# SPDX-FileCopyrightText: 2025 sleepyyapril
#
# SPDX-License-Identifier: AGPL-3.0-or-later AND MIT

- type: trait
  id: WillToLive
  category: TraitsPhysicalFeats
  points: -3
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Redshirt
        - WillToDie
  functions:
    - !type:TraitReplaceComponent
      components:
        - type: DeadModifier
          deadThresholdModifier: 10

- type: trait
  id: WillToDie
  category: TraitsPhysicalDisabilities
  points: 2
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - WillToLive
  functions:
    - !type:TraitReplaceComponent
      components:
        - type: DeadModifier
          deadThresholdModifier: -15

- type: trait
  id: Tenacity
  category: TraitsPhysicalFeats
  points: -4
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - GlassJaw
        - BrittleBoneDisease
  functions:
    - !type:TraitReplaceComponent
      components:
        - type: CritModifier
          critThresholdModifier: 5

- type: trait
  id: GlassJaw
  category: TraitsPhysicalDisabilities
  points: 2
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Tenacity
  functions:
    - !type:TraitReplaceComponent
      components:
        - type: CritModifier
          critThresholdModifier: -10

- type: trait
  id: Vigor
  category: TraitsPhysicalFeats
  points: -6
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Lethargy
        - Weakness # Floofstation
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - Oni
        - IPC
  functions:
    - !type:TraitModifyStamina
      staminaModifier: 10
      decayModifier: 0.6
      cooldownModifier: -0.75

- type: trait
  id: Lethargy
  category: TraitsPhysicalDisabilities
  points: 4
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Vigor
        - Weakness # Floofstation
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - Felinid
        - Tajaran
  functions:
    - !type:TraitModifyStamina
      staminaModifier: -15
      decayModifier: -0.6
      cooldownModifier: 0.75

- type: trait
  id: HighAdrenaline
  category: TraitsPhysicalFeats
  points: -5
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - AdrenalDysfunction
  functions:
    - !type:TraitReplaceComponent
      components:
        - type: Adrenaline
          rangeModifier: 0.4
          inverse: true

- type: trait
  id: AdrenalDysfunction
  category: TraitsPhysicalDisabilities
  points: 3
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - HighAdrenaline
  functions:
    - !type:TraitReplaceComponent
      components:
        - type: Adrenaline
          rangeModifier: 0.8

- type: trait
  id: Masochism
  category: TraitsPhysicalFeats
  points: -5
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - LowPainTolerance
  functions:
    - !type:TraitReplaceComponent
      components:
        - type: PainTolerance
          rangeModifier: 0.4
          inverse: true

- type: trait
  id: LowPainTolerance
  category: TraitsPhysicalDisabilities
  points: 3
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Masochism
  functions:
    - !type:TraitReplaceComponent
      components:
        - type: PainTolerance
          rangeModifier: 0.6

- type: trait
  id: Steadfast
  category: TraitsPhysicalFeats
  points: -4
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - Felinid
        - Tajaran
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Feeble
  functions:
    - !type:TraitModifySlowOnDamage
      damageThresholdsModifier: 10
      speedModifierMultiplier: 0.68

- type: trait
  id: Feeble
  category: TraitsPhysicalDisabilities
  points: 3
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - Felinid
        - Tajaran
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Steadfast
  functions:
    - !type:TraitModifySlowOnDamage
      damageThresholdsModifier: -15
      speedModifierMultiplier: 1.2

- type: trait
  id: MartialArtist
  category: TraitsPhysicalFeats
  points: -5
  requirements:
  - !type:CharacterJobRequirement
    inverted: true
    jobs:
      - StationAi
      - Borg
      - MedicalBorg
      - Boxer
      - MartialArtist
      - Gladiator
  functions:
    - !type:TraitModifyUnarmed
      heavyOnLightMiss: true
      attackRateModifier: 0.8
      rangeModifier: 1.1
    - !type:TraitReplaceComponent
      components:     # Keep BoxerComponent for now until we have After/Before on traits prototypes
        - type: Boxer # for potential conflicts with other traits that replace unarmed damage
          modifiers:
            coefficients:
              Blunt: 1.2
              Slash: 1.2
              Piercing: 1.2
              Heat: 1.2
              Poison: 1.2
              Asphyxiation: 1.2
      # An attack rate of 1.25 hits per second (1 / 0.8 = 1.25) multiplied by 20% extra damage
      # effectively means 50% more overall DPS, same DPS bonus as before (1 * 1.25 * 1.2 = 1.5)
      # but the extra attack rate makes it visually apparent that it's Martial Artist.

- type: trait
  id: Small
  category: TraitsPhysicalBiological
  points: -2
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - Felinid # Felinids/Tajaran already have this feature by default.
        - Rodentia # Floof - Rodentia
        - Resomi # Floof - have this by default after porting Goob changes
        - Kitsune # Floof - M3739 - #937 - Kitsune have this by default.
        - Tajaran
        - Thaven # TheDen - They have their own version below
    - !type:CharacterHeightRequirement
      max: 150
    - !type:CharacterWidthRequirement
      max: 32
  functions:
    - !type:TraitAddComponent
      components:
        - type: PseudoItem
          storedOffset: 0,17
          shape:
            - 0,0,1,4
            - 0,2,3,4
            - 4,0,5,4

- type: trait # TheDen - Thaven-specific version of Small
  id: SmallThaven
  category: AASpecies
  points: -2
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement # Thaven are naturally flexible
      species:
        - Thaven
    - !type:CharacterHeightRequirement
      max: 160 # Looser requirement because thaven minHeight is 5'3" (160cm) but it's a fun trait
    - !type:CharacterWidthRequirement
      max: 36 # Looser requirement so thaven don't have to be crackhead skinny to take it, they're already narrow
  functions:
    - !type:TraitAddComponent
      components:
        - type: PseudoItem
          storedOffset: 0,17
          shape:
            - 0,0,5,4 # A big square because they're folded into a ball (same outer radius as the other baggable characters)

- type: trait
  id: TemperatureTolerance
  category: TraitsPhysicalBiological
  points: -1
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - Vulpkanin # This trait functions exactly as-is for the Vulpkanin trait.
        - Plasmaman # Plasmamen have cold immunity so this trait is unnecessary
        - Resomi # Get this as a species trait
  functions:
    - !type:TraitReplaceComponent
      components:
        - type: TemperatureProtection
          coolingCoefficient: 0.1   # Enough resistance to walk into the chef's freezer, or tolerate daytime temperatures on Glacier without a jacket.

# These traits largely exist to demonstrate more of the "Component Removals" functionality. This way contributors
# can get used to seeing that they can "Remove and Replace" a pre-existing component.
# When declared, componentRemovals work like a "RemComp" that activates upon joining a round.
- type: trait
  id: Talons
  category: TraitsPhysicalBiological
  points: -1
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - Harpy # Harpies already have talons
        - Arachnid # Apparently they have a "piercing" bite
        - Chitinid # They've got the bites too
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Claws
        - StrikingCalluses
        - SharpTeeth
  functions:
    - !type:TraitModifyUnarmed
      soundHit:
        collection: AlienClaw
      animation: WeaponArcClaw
      damage:
        types:
          Piercing: 5 # No, this isn't "OP", this is literally the worst brute damage type in the game.
                      # Same deal as Slash, except that a majority of all armor provides Piercing resistance.
    - !type:TraitRemoveComponent # Plasmamen have self-damage on melee attacks
      components:
        - type: DamageOnHit
          damage:
            types:
              Blunt: 0

- type: trait
  id: Claws
  category: TraitsPhysicalBiological
  points: -1
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - Felinid # Felinids already have cat claws.
        - Tajaran # Tajaran also have cat claws
        - Reptilian # Reptilians also have cat claws.
        - Shadowkin # Shadowkins also have claws.
        # - Vulpkanin # Vulpkanin have "Blunt" claws. One could argue this trait "Sharpens" their claws.
        - Rodentia # Floof - Rodentia already has it
        - Resomi # Resomi get these. Space raptors.
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Talons
        - StrikingCalluses
        - SharpTeeth
  functions:
    - !type:TraitModifyUnarmed
      soundHit:
        collection: AlienClaw
      animation: WeaponArcClaw
      damage:
        types:
          Slash: 5 # Trade stamina damage on hit for a very minor amount of extra bleed.
                  # Blunt also deals bleed damage, so this is more of a sidegrade.
    - !type:TraitRemoveComponent
      components:
        - type: DamageOnHit
          damage:
            types:
              Blunt: 0

- type: trait
  id: SharpTeeth #TheDen
  category: TraitsPhysicalBiological
  points: -2
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
      - StationAi
      - Borg
      - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - Feroxi # They got the bite already
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Talons
        - StrikingCalluses
        - Claws
  functions:
    - !type:TraitModifyUnarmed
      soundHit:
        path: /Audio/Effects/bite.ogg
      animation: WeaponArcBite
      damage:
        types:
          Piercing: 7 #as strong as feroxi bite for an extra cost
    - !type:TraitRemoveComponent
      components:
        - type: DamageOnHit
          damage:
            types:
              Blunt: 0

- type: trait
  id: NaturalWeaponRemoval
  category: AASpecies
  points: 0
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
      - StationAi
      - Borg
      - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - Human
        - Oni
        - SlimePerson
        - Diona
        - Dwarf
        - Arachne
        - IPC # Other species could justify getting this trait for Blunt stamina damage,
              # but 6 blunt -> 5 blunt is a straight up downgrade.
        - Canid # The Den
        - Ovinia # The Den
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Talons
        - Claws
        - SharpTeeth
  functions:
    - !type:TraitModifyUnarmed
      soundHit:
        collection: Punch
      animation: WeaponArcFist
      damage:
        types:
          Blunt: 5
    - !type:TraitRemoveComponent
      components:
        - type: DamageOnHit
          damage:
            types:
              Blunt: 0

- type: trait
  id: StrikingCalluses
  category: TraitsPhysicalFeats
  points: -3
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
      - StationAi
      - Borg
      - MedicalBorg
      - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    #- !type:CharacterSpeciesRequirement
    #  species:
    #    - Human # Entirely arbitrary, I've decided I want a trait unique to humans. Since they don't normally get anything exciting.
                # When we get the Character Records system in, I also want to make this require certain Backgrounds.
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Claws
        - Talons
        - SharpTeeth
    - !type:CharacterLogicOrRequirement
      requirements:
        - !type:CharacterTraitRequirement
          traits:
            - MartialArtist
        - !type:CharacterJobRequirement
          jobs:
            - Boxer
            - MartialArtist
            - Gladiator
    - !type:CharacterLogicOrRequirement
      requirements:
        - !type:CharacterSpeciesRequirement
          inverted: true
          species:
            - Arachne
            - Arachnid
            - Harpy
            - Felinid
            - Reptilian
            - Shadowkin
            - Rodentia
            - Chitinid
            - Tajaran
        - !type:CharacterTraitRequirement
          traits:
            - NaturalWeaponRemoval
            - MartialArtist
  functions:
    - !type:TraitModifyUnarmed
      flatDamageIncrease:
        types:
          Blunt: 2

- type: trait
  id: Spinarette
  category: TraitsPhysicalAugmentations
  points: -3
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - Arachnid
        - Arachne
        - Shadowkin
        - IPC
  functions:
    - !type:TraitAddComponent
      components:
        - type: Sericulture
          action: ActionSericulture
          productionLength: 2
          entityProduced: MaterialWebSilk1
          hungerCost: 1
    - !type:TraitAddTag
      tags:
        - SpiderCraft


- type: trait
  id: BionicArm
  category: TraitsPhysicalAugmentations
  points: -3
  requirements:
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - BionicArmNoVisuals
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
        - Gladiator
  functions:
    - !type:TraitCyberneticLimbReplacement
      removeBodyPart: Arm
      partSymmetry: Left
      protoId: PryingLeftArm #Den
      slotId: "left arm"
    - !type:TraitCyberneticLimbReplacement
      removeBodyPart: Arm
      partSymmetry: Right
      protoId: PryingRightArm #Den
      slotId: "right arm"
    - !type:TraitPushDescription
      descriptionExtensions:
        - description: examine-bionic-arm-message
          fontSize: 12
          requireDetailRange: true

- type: trait
  id: BionicArmNoVisuals
  category: TraitsPhysicalAugmentations
  points: -3
  requirements:
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - BionicArm
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
        - Gladiator
  functions:
    - !type:TraitPushDescription
      descriptionExtensions:
        - description: examine-bionic-arm-message
          fontSize: 12
          requireDetailRange: true
    - !type:TraitAddComponentToBodyPart
      parts:
      - Arm
      components:
      - type: Prying
        speedModifier: 1.5
      - type: UseDelay # For insta prying
        delay: 1

- type: trait
  id: PlateletFactories
  category: TraitsPhysicalAugmentations
  points: -10
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - HealingFactor
  functions: # TODO: Code Platelet factories as an actual obtainable implant, and replace this with TraitAddImplant
    - !type:TraitReplaceComponent
      components:
        - type: PassiveDamage
          allowedStates:
          - Alive
          - Critical
          damageCap: 400
          damage:
            groups:
              Brute: -0.3
              Burn: -0.3
              Airloss: -0.3
              Toxin: -0.3
              Genetic: -0.3

- type: trait
  id: DermalArmor
  category: TraitsPhysicalAugmentations
  points: -6
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
  functions:
    - !type:TraitAddArmor
      damageModifierSets:
        - DermalArmor
    - !type:TraitPushDescription
      descriptionExtensions:
        - description: examine-dermal-armor-message
          fontSize: 12
          requireDetailRange: true

- type: trait
  id: CyberEyes
  category: TraitsPhysicalAugmentations
  points: -4
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterSpeciesRequirement
        inverted: true
        species:
          - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Photophobia
        - Blindness
        - Nearsighted
  functions:
    - !type:TraitPushDescription
      descriptionExtensions:
        - description: examine-cybereyes-message
          fontSize: 12
          requireDetailRange: true
    - !type:TraitReplaceComponent
      components:
        - type: Flashable # Effectively, removes any flash-vulnerability species traits.


- type: trait
  id: FlareShielding
  category: TraitsPhysicalAugmentations
  points: -4
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterDepartmentRequirement
      departments:
        - Security
    - !type:CharacterTraitRequirement
      traits:
        - CyberEyes
  functions:
    - !type:TraitAddComponent
      components:
        - type: FlashImmunity
        - type: EyeProtection


- type: trait
  id: CyberEyesSecurity
  category: TraitsPhysicalAugmentations
  points: -1
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterDepartmentRequirement
      departments:
        - Security
        - Command
        - Dignitary
    - !type:CharacterTraitRequirement
      traits:
        - CyberEyes
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - CyberEyesOmni
  functions:
    - !type:TraitAddComponent
      components:
        - type: ShowJobIcons
        - type: ShowMindShieldIcons
        - type: ShowCriminalRecordIcons

- type: trait
  id: CyberEyesMedical
  category: TraitsPhysicalAugmentations
  points: -2
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterTraitRequirement
      traits:
        - CyberEyes
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - CyberEyesDiagnostic
        - CyberEyesOmni
  functions:
    - !type:TraitAddComponent
      components:
        - type: SolutionScanner
        - type: ShowHealthBars
          damageContainers:
          - Biological
          - BiologicalMetaphysical # Floof - M3739 - #1006
        - type: ShowHealthIcons
          damageContainers:
          - Biological
          - BiologicalMetaphysical # Floof - M3739 - #1006

- type: trait
  id: CyberEyesDiagnostic
  category: TraitsPhysicalAugmentations
  points: -2
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterTraitRequirement
      traits:
        - CyberEyes
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - CyberEyesMedical
        - CyberEyesOmni
  functions:
    - !type:TraitAddComponent
      components:
        - type: EyeProtection
        - type: ShowHealthBars
          damageContainers:
          - Inorganic
          - Silicon

- type: trait
  id: CyberEyesOmni
  category: TraitsPhysicalAugmentations
  points: -3
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterDepartmentRequirement
      departments:
        - Security
        - Dignitary
        - Command
        - Dignitary
    - !type:CharacterTraitRequirement
      traits:
        - CyberEyes
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - CyberEyesMedical
        - CyberEyesDiagnostic
        - CyberEyesSecurity
  functions:
    - !type:TraitAddComponent
      components:
        - type: SolutionScanner
        - type: EyeProtection
        - type: ShowJobIcons
        - type: ShowMindShieldIcons
        - type: ShowCriminalRecordIcons
        - type: ShowHealthIcons
          damageContainers:
          - Biological
          - BiologicalMetaphysical # Floof - M3739 - #1006
        - type: ShowHealthBars
          damageContainers:
          - Biological
          - BiologicalMetaphysical # Floof - M3739 - #1006
          - Inorganic
          - Silicon

- type: trait
  id: Redshirt
  category: TraitsPhysicalDisabilities
  points: 8
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - WillToLive
  functions:
    - !type:TraitReplaceComponent
      components:
        - type: DeadModifier
          deadThresholdModifier: -100

- type: trait
  id: BrittleBoneDisease
  category: TraitsPhysicalDisabilities
  points: 10
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Tenacity
  functions:
    - !type:TraitReplaceComponent
      components:
        - type: CritModifier
          critThresholdModifier: -50

- type: trait
  id: LightAmplification
  category: TraitsPhysicalAugmentations
  points: -4
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterTraitRequirement
      traits:
        - CyberEyes
  functions:
    - !type:TraitAddComponent
      components:
        - type: NightVision

- type: trait
  id: ThermographicVision
  category: TraitsPhysicalAugmentations
  points: -4
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterTraitRequirement
      traits:
        - CyberEyes
  functions:
    - !type:TraitAddComponent
      components:
        - type: ThermalVision
          pulseTime: 2
          toggleAction: PulseThermalVision
    - !type:TraitPushDescription
      descriptionExtensions:
        - description: examine-thermal-vision-message
          fontSize: 12
          requireDetailRange: true

- type: trait
  id: NaniteAutoRepairBots
  category: TraitsPhysicalAugmentations
  points: -10
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterSpeciesRequirement
      species:
        - IPC
  functions: # TODO: Code Platelet factories as an actual obtainable implant, and replace this with TraitAddImplant
    - !type:TraitReplaceComponent
      components:
        - type: PassiveDamage
          allowedStates:
          - Alive
          - Critical
          - Dead
          damageCap: 250
          damage:
            groups:
              Brute: -0.3
              Burn: -0.3
              Electronic : -0.3

- type: trait
  id: BionicLeg
  category: TraitsPhysicalAugmentations
  points: -6 #Den
  requirements:
    - !type:CharacterJobRequirement
      jobs:
        - Paramedic #Den
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - WheelchairBound
        - BionicLegNoVisuals
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - Arachne
  functions:
    - !type:TraitPushDescription
      descriptionExtensions:
        - description: examine-bionic-leg-message
          fontSize: 12
          requireDetailRange: true
    - !type:TraitCyberneticLimbReplacement
      removeBodyPart: Leg
      partSymmetry: Left
      protoId: SpeedLeftLeg
      slotId: "left leg"
    - !type:TraitCyberneticLimbReplacement
      removeBodyPart: Leg
      partSymmetry: Right
      protoId: SpeedRightLeg
      slotId: "right leg"

- type: trait
  id: BionicLegNoVisuals
  category: TraitsPhysicalAugmentations
  points: -6
  requirements:
    - !type:CharacterJobRequirement
      jobs:
        - Paramedic
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - WheelchairBound
        - BionicLeg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - Arachne
  functions:
    - !type:TraitAddComponentToBodyPart
      parts:
      - Leg
      components:
      - type: MovementBodyPart
        walkSpeed: 3.125
        sprintSpeed: 5.625
      - type: ProtectedFromStepTriggers
        whitelist:
          types:
          - Shard
          - Mousetrap
          - SlipEntity
    - !type:TraitPushDescription
      descriptionExtensions:
        - description: examine-bionic-leg-message
          fontSize: 12
          requireDetailRange: true

- type: trait
  id: FlareShieldingModule
  category: AASpecies
  points: -4
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterDepartmentRequirement
      departments:
        - Security
    - !type:CharacterSpeciesRequirement
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Photophobia
        - Blindness
        - Nearsighted
    - !type:CharacterItemGroupRequirement
      group: TraitsMind
  functions:
    - !type:TraitAddComponent
      components:
        - type: FlashImmunity
        - type: EyeProtection

- type: trait
  id: SecurityEyesModule
  category: AASpecies
  points: -1
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterDepartmentRequirement
      departments:
        - Security
        - Command
        - Dignitary
    - !type:CharacterSpeciesRequirement
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - OmniEyesModule
  functions:
    - !type:TraitAddComponent
      components:
        - type: ShowJobIcons
        - type: ShowMindShieldIcons
        - type: ShowCriminalRecordIcons

- type: trait
  id: MedicalEyesModule
  category: AASpecies
  points: -2
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterSpeciesRequirement
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - DiagnosticEyesModule
        - OmniEyesModule
  functions:
    - !type:TraitAddComponent
      components:
        - type: SolutionScanner
        - type: ShowHealthBars
          damageContainers:
          - Biological
        - type: ShowHealthIcons
          damageContainers:
          - Biological

- type: trait
  id: DiagnosticEyesModule
  category: AASpecies
  points: -2
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterSpeciesRequirement
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - MedicalEyesModule
        - OmniEyesModule
  functions:
    - !type:TraitAddComponent
      components:
        - type: EyeProtection
        - type: ShowHealthBars
          damageContainers:
          - Inorganic
          - Silicon

- type: trait
  id: OmniEyesModule
  category: AASpecies
  points: -3
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterDepartmentRequirement
      departments:
        - Security
        - Dignitary
        - Command
        - Dignitary
    - !type:CharacterSpeciesRequirement
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Photophobia
        - Blindness
        - Nearsighted
        - MedicalEyesModule
        - DiagnosticEyesModule
        - SecurityEyesModule
  functions:
    - !type:TraitAddComponent
      components:
        - type: SolutionScanner
        - type: EyeProtection
        - type: ShowJobIcons
        - type: ShowMindShieldIcons
        - type: ShowCriminalRecordIcons
        - type: ShowHealthIcons
          damageContainers:
          - Biological
        - type: ShowHealthBars
          damageContainers:
          - Biological
          - Inorganic
          - Silicon

- type: trait
  id: LightAmplificationModule
  category: AASpecies
  points: -4
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterSpeciesRequirement
      species:
        - IPC
  functions:
    - !type:TraitAddComponent
      components:
        - type: NightVision

- type: trait
  id: ThermographicVisionModule
  category: AASpecies
  points: -4
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
        - Prisoner # Bionics should be "Confiscated" from long term prisoners.
    - !type:CharacterSpeciesRequirement
      species:
        - IPC
  functions:
    - !type:TraitAddComponent
      components:
        - type: ThermalVision
          pulseTime: 2
          toggleAction: PulseThermalVision
    - !type:TraitPushDescription
      descriptionExtensions:
        - description: examine-thermal-vision-message
          fontSize: 12
          requireDetailRange: true

# - type: trait
#   id: Bulky
#   category: TraitsPhysicalBiological
#   points: -6
#   requirements:
#     - !type:CharacterTraitRequirement
#       inverted: true
#       traits:
#         - Featherweight
#   functions:
#     - !type:TraitModifyDensity
#       densityModifier: 55
#       multiply: false
#     - !type:TraitPushDescription
#       descriptionExtensions:
#         - description: examine-bulky-message
#           fontSize: 12
#           requireDetailRange: true

# - type: trait
#   id: Featherweight
#   category: TraitsPhysicalBiological
#   points: 3
#   requirements:
#     - !type:CharacterTraitRequirement
#       inverted: true
#       traits:
#         - Bulky
#   functions:
#     - !type:TraitModifyDensity
#       densityModifier: 0.5
#       multiply: true
#     - !type:TraitPushDescription
#       descriptionExtensions:
#         - description: examine-featherweight-message
#           fontSize: 12
#           requireDetailRange: true

- type: trait
  id: Bodybuilder
  category: TraitsPhysicalFeats
  points: -6
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Weakling
        - HandsFreePulling
  functions:
    - !type:TraitReplaceComponent
      components:
        - type: Puller
          walkSpeedModifier: 0.975
          sprintSpeedModifier: 0.975
          softGrabSpeedModifier: 0.95
          hardGrabSpeedModifier: 0.85
          chokeGrabSpeedModifier: 0.7
          pushAcceleration: 0.45 # DEN: 0.3 -> 0.45, 50% increase
    - !type:TraitPushDescription
      descriptionExtensions:
        - description: examine-bodybuilder-message
          fontSize: 12
          requireDetailRange: true

- type: trait
  id: Weakling
  category: TraitsPhysicalDisabilities
  points: 3
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
        - Bodybuilder
        - HandsFreePulling
  functions:
    - !type:TraitReplaceComponent
      components:
        - type: Puller
          walkSpeedModifier: 0.9
          sprintSpeedModifier: 0.9
          softGrabSpeedModifier: 0.8
          hardGrabSpeedModifier: 0.4
          chokeGrabSpeedModifier: 0.2
          pushAcceleration: 0.15 # DEN: 0.3 -> 0.15, 50% decrease
    - !type:TraitPushDescription
      descriptionExtensions:
        - description: examine-weakling-message
          fontSize: 12
          requireDetailRange: true

- type: trait
  id: Vampirism # You may port this to EE, you have my permission!
  category: TraitsPhysicalBiological
  points: -3
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - IPC
    - !type:CharacterTraitRequirement
      inverted: true
      traits:
      - BloodExaminer # DEN
      - HollowFangs
  functions:
  - !type:TraitAddComponent
    components:
      - type: Vampirism
        succDelay: 3
        specialDigestible: # Vampires cannot eat food chat is that real
          tags:
          - Pill
          - Crayon
          - Paper
          - VampireFood # Ok they can have a little food..

# Commented out upon request for the time being
#- type: trait
#  id: EggLaying
#  category: Lewd
#  points: 0
#  requirements:
#  - !type:CharacterJobRequirement
#    inverted: true
#    jobs:
#    - Borg
#    - MedicalBorg
#  functions:
#    - !type:TraitAddComponent
#      components:
#        - type: EggLayer
#          eggSpawn:
#            - id: ItemEggTrait

- type: trait # Based on Cosmatic Drift's Synth trait
  id: Synthetic
  category: TraitsPhysicalBiological
  points: -2 # Can detect ion storms, poison blood
  requirements:
    - !type:CharacterJobRequirement
      inverted: true
      jobs:
        - StationAi
        - Borg
        - MedicalBorg
    - !type:CharacterSpeciesRequirement
      inverted: true
      species:
        - IPC
  functions:
    - !type:TraitAddComponent
      components:
        - type: Synth
        - type: IonStormNotifier
