# SPDX-FileCopyrightText: 2025 Shaman
# SPDX-FileCopyrightText: 2025 Steven Higginbotham
# SPDX-FileCopyrightText: 2025 sleepyyapril
#
# SPDX-License-Identifier: AGPL-3.0-or-later

- type: entity
  parent: BaseChemistryEmptyBottle
  id: ChemistryEmptyBottleMantis
  name: electrum bottle
  description: "An eidolite bottle in a durable electrum shell. Useful for your rituals."
  components:
  - type: Sprite
    sprite: _DEN/Objects/Specific/Mantis/bottlemantis.rsi
    layers:
      - state: bottle
      - state: bottle-1
        map: ["enum.SolutionContainerLayers.Fill"]
        visible: false
  - type: Item
    sprite: _DEN/Objects/Specific/Mantis/bottlemantis.rsi
  - type: SolutionContainerVisuals
    maxFillLevels: 6
    fillBaseName: bottle-
  - type: DamageOnLand
    damage:
      types:
        Blunt: 0 # Metal shell
  - type: DamageOnHighSpeedImpact
    damage:
      types:
        Blunt: 0 # Metal shell
  - type: DamageOtherOnHit
    damage:
      types:
        Blunt: 1 # Doink
  - type: Damageable
    damageContainer: Inorganic
    damageModifierSet: Metallic # Metal shell
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 10
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak # There's still a crystal interior
          params:
            volume: -4
      - !type:SpillBehavior { }
      - !type:SpawnEntitiesBehavior
        spawn:
          MaterialEidolite1:
            min: 1
            max: 1
          ScrapElectrum:
            min: 1
            max: 1
        transferForensics: true
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: PhysicalComposition
    materialComposition:
      Eidolite: 100
  - type: Tag
    tags:
    - Bottle
    - MantisBeltStorable
    - MantisBoxChemicalsStorable
