# SPDX-FileCopyrightText: 2025 Steven Higginbotham
# SPDX-FileCopyrightText: 2025 portfiend
#
# SPDX-License-Identifier: AGPL-3.0-or-later

- type: entity
  parent: [ClothingHandsInedibleBase, BaseFoldable, BaseAntiPsionicWeapon, BaseMantisContraband]
  id: MantisMeleeFist
  name: manifold
  description: "A heavy mnemolith gauntlet designed for control rather than sheer lethality, capable of hurling foes back and, at times, deflecting incoming fire. Said to take its name from its capacity for folding men, and its clever design allows it to be worn on either hand. Deadly when wielded against psionic and otherworldly threats."
  components:
  - type: Foldable
    canFoldInsideContainer: true
    foldVerbText: fold-flip-verb
    unfoldVerbText: fold-flip-verb
  - type: FoldableClothing
    foldedEquippedPrefix: flipped
  - type: Sprite
    sprite: _DEN/Objects/Weapons/Melee/Mantis/mantisfist.rsi
    layers:
    - state: icon
      map: ["unfoldedLayer"]
    - state: icon-flipped
      map: ["foldedLayer"]
      visible: false
  - type: Appearance
  - type: Item
    sprite: _DEN/Objects/Weapons/Melee/Mantis/mantisfist.rsi
    size: Normal
  - type: Clothing
    sprite: _DEN/Objects/Weapons/Melee/Mantis/mantisfist.rsi
  - type: MeleeWeapon
    bluntStaminaDamageFactor: 1.25 # Stuns in 6 hits (which takes 6 seconds)
    attackRate: 1.0 # A bit slower than the other weapons
    range: 1.5
    angle: 60
    damage:
      types:
        Blunt: 12 # 12 DPS, or 15 DPS against psions (same as CombatKnife)
        Holy: 6 # 22.5 total DPS against psionic supernaturals
        Structural: 7.5 # 5 structural DPS
    soundHit:
      path: /Audio/_Impstation/Weapons/nullglove.ogg
      params:
        variation: 0.15
    animation: WeaponArcPunch
    wideAnimation: WeaponArcSmash
    mustBeEquippedToUse: true
  - type: MeleeThrowOnHit # They fly about six tiles and don't take extra impact damage when hitting walls
    speed: 10
    lifetime: 0.5
  - type: Reflect
    reflectProb: .2
    spread: 135
  - type: Fiber
    fiberColor: fibers-bluish
    fiberMaterial: fibers-stony
  - type: Prying
    speedModifier: 1
    useSound:
      path: /Audio/Items/crowbar.ogg
  - type: Tag
    tags:
    - WhitelistChameleon
    - MantisFist
    - MantisBeltStorable

- type: entity
  parent: [BaseRivalCompanyContraband, MantisMeleeFist] # Traitor version, loosely comparable to BaseBallBatHomeRun, but with less damage and knockback because it's wearable
  id: MantisMeleeFistDouble
  name: twinned manifold
  description: "Heavy mnemolith gauntlets forged through forbidden rituals, capable of hurling foes back and, at times, deflecting incoming fire. Said to take their name from their capacity for folding men. Deadly when wielded against psionic and otherworldly threats."
  components:
  - type: Sprite
    sprite: _DEN/Objects/Weapons/Melee/Mantis/mantisfistdouble.rsi
    state: icon
  - type: Clothing
    sprite: _DEN/Objects/Weapons/Melee/Mantis/mantisfistdouble.rsi
  - type: MeleeWeapon
    bluntStaminaDamageFactor: 1.35 # Stuns in 5 hits (which takes 5 seconds, compared to BaseBallBatHomeRun's 4.5)
    damage:
      types:
        Blunt: 15 # 15 DPS (same as CombatKnife), or 18.75 DPS against psions
        Holy: 7.5 # 28.13 total DPS against psionic supernaturals
        Structural: 11.25 # 7.5 structural DPS (same as BaseBallBat)
  - type: MeleeThrowOnHit # They just go sailing and do hit walls hard enough to hurt (still only 2/3rds as fast as BaseBallBatHomeRun)
    speed: 20
    lifetime: 5
  - type: FingerprintMask # Both hands are covered, so they hide fingerprints
  - type: Prying
    speedModifier: 1.5
    useSound:
      path: /Audio/Items/crowbar.ogg
