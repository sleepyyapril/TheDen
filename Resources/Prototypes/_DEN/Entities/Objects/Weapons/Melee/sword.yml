# SPDX-FileCopyrightText: 2025 Jakumba
# SPDX-FileCopyrightText: 2025 Rosycup
# SPDX-FileCopyrightText: 2025 sleepyyapril
#
# SPDX-License-Identifier: AGPL-3.0-or-later AND MIT

- type: entity
  name: antique greatsword
  parent: BaseSword
  id: Greatsword
  description: A massive blade more akin to a hunk of well forged metal on a stick, enhanced with bluespace tech, there are tally marks etched onto the base of the blade.
  components:
  - type: Sprite
    sprite: _DEN/Objects/Weapons/Melee/shieldblade.rsi
    state: icon
  - type: MeleeWeapon
    wideAnimationRotation: -135
    attackRate: 1.5
    range: 1.85
    damage:
      types:
        Slash: 25
        Blunt: 10
        Structural: 30
    bluntStaminaDamageFactor: 1
    heavyRateModifier: 2
    heavyRangeModifier: 1
    heavyDamageBaseModifier: 1.2
    heavyStaminaCost: 30
    maxTargets: 10
    angle: 90
    soundHit:
      collection: MetalThud
  - type: DamageOtherOnHit
    staminaCost: 20
  - type: MeleeRequiresWield
  - type: EmbeddableProjectile
  - type: EmbedPassiveDamage
  - type: Wieldable
  - type: MeleeThrowOnHit
    speed: 5
    lifetime: 0.05
  - type: Reflect
    reflectProb: .25
    spread: 90
  - type: ThrowingAngle
    angle: 225
  - type: Item
    size: Ginormous
  - type: ClothingSpeedModifier
    walkModifier: 0.90
    sprintModifier: 0.90
  - type: Tool
    qualities:
    - Axing #Funny
  - type: Clothing
    quickEquip: false
    sprite: _DEN/Objects/Weapons/Melee/shieldblade.rsi
    slots:
    - Back
    - suitStorage

- type: entity
  name: greatsword
  parent: [Greatsword, BaseCentcommContraband]
  id: GreatswordBlueshield
  description: A massive blade more akin to a hunk of well forged metal on a stick, enhanced with bluespace technology.
  components:
  - type: Sprite
    sprite: _DEN/Objects/Weapons/Melee/shieldbladeblue.rsi
    state: icon
  - type: Clothing
    quickEquip: false
    sprite: _DEN/Objects/Weapons/Melee/shieldbladeblue.rsi
    slots:
    - Back
    - suitStorage

- type: entity
  parent: [BaseSword, BaseAntiPsionicWeapon, BaseMantisContraband]
  id: MantisSword # The risk/reward option, highly likely to knock you on your ass and get you killed, extremely difficult to use effectively (the cost of being cool)
  name: faust
  description: "A mnemolith greatsword carried in a sheath braced with mu-metal bands that cross over its ornamental eyes as warning. The bindings contain the blade's unstable resonance: Faust rebounds violently from any impact that does not strike a psion, whipping back into its bearer even if it merely grazes a wall. It must be properly wieldedâ€”without focus, the blade resists. Unmatched against psionic and otherworldly threats, perilous against anything else."
  components: # Yes the description is long, but players must understand how it works from description alone, and I want it to remain in-universe
  - type: AntiPsionicWeapon
    punish: true # It'll hurt you if you hit anything non-psionic (a mouse, a wall, etc.)
    punishChances: 1 # Every time
    punishSelfDamage: 35.156 # And it hits you this hard because you're psionic (like taking a hit from the warden's greatsword up there)
    punishStunDuration: 5 # And it stuns you like a noospheric storm
  - type: MeleeRequiresWield
    fumbleOnAttempt: true # It'll also stun you if you try to swing it one-handed
  - type: Wieldable
    wieldSound:
      path: /Audio/_DEN/Weapons/Melee/faustwield.ogg
    unwieldSound:
      path: /Audio/_DEN/Weapons/Melee/faustunwield.ogg
  - type: MeleeWeapon
    attackRate: 1.5
    range: 1.85
    angle: 90
    heavyRateModifier: 1.33
    heavyRangeModifier: 1.85 # Same range as normal attacks
    heavyDamageBaseModifier: 1.33 # Heavy attacks are one-third slower, so they hit one-third harder, to be fair
    heavyStaminaCost: 30 # Also you can't spam them or you'll fall over
    maxTargets: 10 # When you see a stat that looks good, just remember that if you hit anything non-psionic, you lose
    damage:
      types:
        Slash: 28.125 # 18.75 DPS (same as CaptainSabre), or 23.44 DPS against psions (but if you miss, it hits you that hard)
        Holy: 14.0625 # 35.16 total DPS against supernaturals (no way are you landing every left click on a simplemob)
        Structural: 45 # I cannot describe to you how funny it is to swing, hit a table, smash it, and collapse into the floor because tables aren't psionic
    soundHit:
      path: /Audio/_DEN/Weapons/Melee/fausthit.ogg
    soundSwing:
      path: /Audio/_DEN/Weapons/Melee/faustmiss.ogg
    soundNoDamage:
      path: /Audio/_DEN/Weapons/Melee/fausthit.ogg
  - type: DamageOtherOnHit
    staminaCost: 100 # Throwing it will put you on the floor, unless your species or traits let you do it, but then you'll still be extremely slow and unarmed
  - type: EmbeddableProjectile
    sound: /Audio/_DEN/Weapons/Melee/fausthit.ogg
    removalTime: 2
  - type: EmbedPassiveDamage
  - type: Sprite
    sprite: _DEN/Objects/Weapons/Melee/mantissword.rsi
    state: icon
  - type: Item
    sprite: _DEN/Objects/Weapons/Melee/mantissword.rsi
    storedRotation: -45
    storedSprite:
      state: icon
      sprite: _DEN/Objects/Weapons/Melee/mantissword.rsi # Same sprite, just rotated, because it looks wrong otherwise
  - type: ThrowingAngle
    angle: -135
    angularVelocity: false # No spinning, blade-first
  - type: Tag
    tags:
    - MantisSword
    - MantisBeltStorable
