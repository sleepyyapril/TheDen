# SPDX-FileCopyrightText: 2025 Shaman
# SPDX-FileCopyrightText: 2025 juniwoofs
#
# SPDX-License-Identifier: AGPL-3.0-or-later

- type: entity
  parent: BaseKnife
  id: TailorsKnife
  name: tailor's knife
  description: A simple, wedge-shaped knife designed to cut fabric. Short, narrow, and lacking a grip entirely.
  components:
  - type: Tag
    tags:
    - Knife
  - type: MeleeWeapon
    attackRate: 1
    wideAnimationRotation: 180
    damage:
      types:
        Slash: 4
  - type: DisarmMalus
    malus: 0.225
  - type: ThrowingAngle
    angle: 180
  - type: Sprite
    sprite: _DEN/Objects/Weapons/Melee/tailorsknife.rsi
    state: icon
  - type: Item
    sprite: _DEN/Objects/Weapons/Melee/tailorsknife.rsi

- type: entity
  parent: [TailorsKnife, BaseAntiPsionicWeapon]
  id: MantisTailorsKnife
  name: ravel
  description: "A mnemolith tailor's knife, presumably stolen from whoever designed these new uniforms. You rat."
  components:
  - type: Sprite
    sprite: _DEN/Objects/Weapons/Melee/Mantis/mantistailorsknife.rsi
    state: icon
  - type: Item
    sprite: _DEN/Objects/Weapons/Melee/Mantis/mantistailorsknife.rsi
  - type: MeleeWeapon
    attackRate: .6666
    wideAnimationRotation: -180
    damage:
      types:
        Slash: 4 # 6 DPS (same as Shiv), or 7.5 DPS against psions
        Holy: 1.6 # 11.25 total DPS against psionic supernaturals
  - type: EmbeddableProjectile
    sound: /Audio/Weapons/pierce.ogg # Just a dull thunk since it does almost no damage
  - type: Tag
    tags:
    - MantisBeltStorable
    - Knife

- type: entity
  parent: [CombatKnife, BaseAntiPsionicWeapon, BaseMantisContraband]
  id: MantisMeleeKnife
  name: athame
  description: "A mnemolith knife shaped like a claw, its back lined with swordbreaker teeth--though it remains unclear who, exactly, is drawing blades against mantes. The finger ring improves grip and allows for idle spinning tricks, though they serve no tactical purpose. Deadly when wielded against psionic and otherworldly threats."
  components:
  - type: ItemToggle # You can toggle spinning it around your finger, though it's just cosmetic
    predictable: false
    soundActivate:
      path: /Audio/Effects/toss.ogg
      params:
        volume: -4
        variation: 0.05
    soundDeactivate:
      path: /Audio/Effects/weak_hit2.ogg
      params:
        volume: -4
        variation: 0.05
  - type: UseDelay
    delay: 1
  - type: MeleeWeapon
    attackRate: .6666
    range: 1.5
    angle: 40
    wideAnimationRotation: -135
    damage:
      types:
        Slash: 10 # 15 DPS (same as CombatKnife), or 18.75 DPS against psions
        Holy: 5 # 28.13 total DPS against psionic supernaturals
  - type: EmbeddableProjectile
    sound: /Audio/Weapons/star_hit.ogg
    removalTime: 2
  - type: EmbedPassiveDamage
  - type: Item
    sprite: _DEN/Objects/Weapons/Melee/Mantis/mantisknife.rsi
    storedSprite:
      sprite: _DEN/Objects/Weapons/Melee/Mantis/mantisknife.rsi
      state: icon
  - type: Sprite
    sprite: _DEN/Objects/Weapons/Melee/Mantis/mantisknife.rsi
  - type: Appearance
  - type: ToggleableVisuals
    replaceMode: true
    spriteLayer: null
    inhandVisuals:
      left:
      - state: spinning-inhand-left
        map: ["left-spinning"]
      right:
      - state: spinning-inhand-right
        map: ["right-spinning"]
  - type: ThrowingAngle
    angle: -135
  - type: DisarmMalus
    malus: 0.3
  - type: Tag
    tags:
    - Knife
    - MantisKnife
    - MantisBeltStorable

- type: entity
  parent: [CombatKnife, BaseAntiPsionicWeapon, BaseMantisContraband]
  id: MantisMeleeSickle
  name: boline
  description: "A heavy mnemolith sickle set with an eidolite eye, crafted as the athame's more savage counterpart, suited for sweeping, methodical strikes. The finger ring allows for idle spinning tricks, though they serve no tactical purpose. Deadly when wielded against psionic and otherworldly threats."
  components:
  - type: ItemToggle # You can toggle spinning it around your finger, though it's just cosmetic
    predictable: false
    soundActivate:
      path: /Audio/Effects/toss.ogg
      params:
        volume: -4
        variation: 0.05
    soundDeactivate:
      path: /Audio/Effects/weak_hit2.ogg
      params:
        volume: -4
        variation: 0.05
  - type: UseDelay
    delay: 1
  - type: MeleeWeapon
    attackRate: 1.3333 # Twice as slow as the athame, but twice the damage, so same DPS
    range: 1.5 # Same range as the athame
    angle: 60 # Swings a little wider wider than the athame, but easier to disarm
    wideAnimationRotation: -135
    damage:
      types:
        Slash: 20 # 15 DPS (same as CombatKnife), or 18.75 DPS against psions
        Holy: 10 # 28.13 total DPS against psionic supernaturals
  - type: EmbeddableProjectile
    sound: /Audio/Weapons/star_hit.ogg
    removalTime: 2
  - type: EmbedPassiveDamage
  - type: Item
    size: Normal
    sprite: _DEN/Objects/Weapons/Melee/Mantis/mantissickle-inhands-64x.rsi
    storedSprite:
      sprite: _DEN/Objects/Weapons/Melee/Mantis/mantissickle.rsi
      state: icon
  - type: Sprite
    sprite: _DEN/Objects/Weapons/Melee/Mantis/mantissickle.rsi
  - type: Appearance
  - type: ToggleableVisuals
    replaceMode: true
    spriteLayer: null
    inhandVisuals:
      left:
      - state: spinning-inhand-left
        map: ["left-spinning"]
      right:
      - state: spinning-inhand-right
        map: ["right-spinning"]
  - type: ThrowingAngle
    angle: -135
  - type: MeleeThrowOnHit # Just a tiny knockback to look cool, barely moves anything
    speed: 3
    lifetime: 0.025
  - type: DisarmMalus
    malus: 0
  - type: Tag
    tags:
    - Knife
    - MantisSickle
    - MantisBeltStorable
