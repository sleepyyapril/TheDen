- type: entity
  parent: [CaneBase, BaseAntiPsionicWeapon, BaseMantisContraband]
  id: MantisMeleeCane
  name: gnomon
  description: "An amaranth cane crowned with an eidolite crystal. If flipped in the hand, the needle-sharp mnemolith tip serves as a thrusting weapon. A refined accessory, practical for mantes with limited mobility. Deadly when wielded against psionic and otherworldly threats."
  components:
  - type: Sprite
    sprite: _DEN/Objects/Weapons/Melee/mantiscane.rsi
    layers:
    - state: icon
      map: ["icon"]
    - state: icon-raised
      map: ["icon-raised"]
      visible: false
  - type: Item
    sprite: _DEN/Objects/Weapons/Melee/mantiscane.rsi
    size: Normal
    shape:
    - 0,0,1,1 # To override the default cane size
  - type: Appearance
  - type: ToggleableVisuals #TODO: FREEMODEL PLEASE GOD HELP ME - CANE FLIPS BUT OVERLAPS ITS OLD SPRITE
    spriteLayer: icon-raised
    inhandVisuals:
      left:
      - state: inhand-left
        map: [ "left" ]
        visible: false
      - state: raised-inhand-left
        map: [ "left-raised" ]
      right:
      - state: inhand-right
        map: [ "right" ]
        visible: false
      - state: raised-inhand-right
        map: [ "raised-right" ]
  - type: GenericVisualizer
    visuals:
      enum.ToggleableVisuals.Enabled:
        icon:
          True: { visible: false }
          False: { visible: true }
        icon-raised:
          True: { visible: true }
          False: { visible: false }
        left:
          True: { visible: false }
          False: { visible: true }
        left-raised:
          True: { visible: true }
          False: { visible: false }
        right:
          True: { visible: false }
          False: { visible: true }
        right-raised:
          True: { visible: true }
          False: { visible: false }
  - type: ItemToggle
    predictable: false
    soundActivate:
      path: /Audio/_DEN/Weapons/Melee/rapiermiss.ogg
      params:
        volume: -5
        pitch: 1.1
        variation: 0.05
    soundDeactivate:
      path: /Audio/_DEN/Weapons/Melee/rapiermiss.ogg
      params:
        volume: -5
        pitch: 0.9
        variation: 0.05
  - type: ItemToggleMeleeWeapon
    activatedSoundOnHit:
      path: /Audio/Weapons/Melee/rapierhit.ogg
      params:
        variation: 0.05
    activatedSoundOnHitNoDamage:
      path: /Audio/_DEN/Weapons/Melee/rapiermiss.ogg
      params:
        variation: 0.05
    deactivatedSoundOnHit:
      collection: WeakHit
      params:
        variation: 0.05
    deactivatedSoundOnHitNoDamage:
      path: /Audio/Weapons/punchmiss.ogg
      params:
        variation: 0.05
    activatedDamage:
        types: # If you flip it, you stab them with the point
          Pierce: 10 # 15 DPS (same as CombatKnife), or 18.75 DPS against psions
          Holy: 5 # 28.13 total DPS against psionic supernaturals
  - type: MeleeWeapon
    attackRate: .6666
    wideAnimationRotation: -135
    damage:
      types: # If you don't flip it, you just bonk them
        Blunt: 5 # 7.5 DPS (same as Crowbar)
  - type: AntiPsionicWeapon # To override the +25% blunt damage against psions, because the bonking part isn't made of mnemolith
    modifiers:
      coefficients:
        Pierce: 1.25
        Holy: 1.25
  - type: ItemToggleDamageOtherOnHit
  - type: EmbeddableProjectile
    sound: /Audio/Weapons/star_hit.ogg
    removalTime: 2
  - type: EmbedPassiveDamage
  - type: ThrowingAngle
    angle: -135
  - type: StaminaDamageOnHit
    damage: 0
  - type: Tag
    tags:
    - MantisCane
    - MantisBeltStorable
