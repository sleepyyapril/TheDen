# SPDX-FileCopyrightText: 2025 Shaman
#
# SPDX-License-Identifier: AGPL-3.0-or-later

# I'm sick of adding this component to every mantis weapon so I'm making a base item for it
# I've included notes on anti-psionic weapon design here if you want to make something with it, because the system is unintuitive
- type: entity
  parent: [BaseItem, BaseObjectVerbsCuteness]
  # See MantisMeleeKnife if you need an implementation example, that's the flagship anti-psionic weapon
  # Anti-psionic weapons are always made of MaterialMnemolith and use that palette in the fashion you see there
  id: BaseAntiPsionicWeapon
  abstract: true
  # I treat the mantis's anti-psionic weapons like occult relics, so I tend to give them unique names (athame, manifold, gnomon, faust, etc.)
  # Add "Deadly when wielded against psionic or otherworldly threats." to the end of anti-psionic weapon descriptions, because the damage tooltip doesn't say it
  components:
  - type: AntiPsionicWeapon
    punish: false
    # Normally false, unless you're making a special weapon that you want to stun its user when they hit anything non-psionic (see MantisMeleeGreatsword)
    # I've included common damage types below, but if a weapon doesn't do a certain type of damage, this obviously won't multiply it
    # Brute damage from the mnemolith itself, burn damage from psionic forms of energy (like psionic fire), holy represents metaphysical power
    # A standard anti-psionic weapon is 25% stronger against psionic enemies across the board, so it's predictable and players don't have to guess
    # This includes supernatural enemies, which are (or should be) "psionic" for the purpose of being weak to these weapons, despite not having any abilities
    modifiers:
      coefficients:
        Blunt: 1.25
        Slash: 1.25
        Piercing: 1.25
        Heat: 1.25
        Cold: 1.25
        Holy: 1.25
  # The values here will get overridden if it's a real weapon, of course, but if it's ever a problem just comment this component out
  # Most anti-psionic weapons have a 0.6666 attack rate and DPS equal to CombatKnife against non-psions
  # To calculate DPS (which I like to compare to existing items and note in the comments) just divide the Damage by the AttackRate
  # A standard anti-psionic weapon does holy damage that's equal to half of its total physical damage
  # For WideAnimationRotation, enter the degrees that make the sprite point downward on its canvas (counterclockwise is positive)
  - type: MeleeWeapon
    # attackRate: .6666
    # wideAnimationRotation: 0
    damage:
      types:
        Slash: 1
        Holy: 0.5
  # DamageOtherOnHit makes it strike things when thrown, inheriting MeleeWeapon damage if you don't specify within this component
  # ThrowingAngle follows the same rules as WideAnimationRotation (point the sprite downward)
  # LandAtCursor just makes these items go slightly past where you throw them, instead of landing just short
  # Set AngularVelocity to true if you want the item to rotate when thrown
  - type: DamageOtherOnHit
  # - type: ThrowingAngle
    # angle: 0
  - type: LandAtCursor
  - type: ThrowingAngle
    angularVelocity: false
  # Probably a good idea to have this here too
  # It'd be nice to have a guidebook just for anti-psionic weapons though
  - type: GuideHelp
    guides: [ MantisGuide ]

# And here's one for items that are made of mnemolith but aren't specifically weapons, like PaperMantis
# They inherit the above so they barely hurt, and slash was selected as default because mnemolith is a sharp, crystalline stone
# Their damage values are hidden, you can only wideswing them, and they only hit one person since it's more for flavor than fighting
- type: entity
  parent: BaseAntiPsionicWeapon
  id: BaseAntiPsionicObject
  abstract: true
  components:
  - type: MeleeWeapon
    hidden: true
    disableClick: true
    heavyRateModifier: 1
    heavyRangeModifier: 1
    heavyDamageBaseModifier: 1
    heavyStaminaCost: 0
    maxTargets: 1
