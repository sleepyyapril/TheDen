- type: entity
  parent: BaseWeaponPowerCell
  id: BaseMantisGun
  name: base mantis gun
  description: "A formless concept within the noosphere."
  abstract: true
  components:
  - type: Sprite
    sprite: _DEN/Objects/Weapons/Guns/Battery/mantis-pistol.rsi
    layers:
    - state: base
      map: ["enum.GunVisualLayers.Base"]
    - state: mag-0
      map: ["enum.GunVisualLayers.Mag"]
  - type: Item
    size: Small
    shape:
    - 0,0,1,0
    - 0,1,0,1
  - type: Clothing
    sprite: _DEN/Objects/Weapons/Guns/Battery/mantis-pistol.rsi
    quickEquip: false
    slots:
    - Belt
    - suitStorage
  - type: Gun
    fireRate: 5
    fireOnDropChance: 0.5
    selectedMode: SemiAuto
    availableModes:
    - SemiAuto
  - type: MagazineVisuals
    magState: mag
    steps: 2
    zeroVisible: true
    soundGunshot: # Lorewise, they use altered anomaly cores to manifest noospheric concepts as ammunition
      path: /Audio/Weapons/Guns/Gunshots/pistol.ogg # But codewise, they're battery guns that shoot weird bullets
    soundEmpty:
      path: /Audio/_DV/Weapons/Guns/Empty/dry_fire.ogg
  - type: ItemSlots
    slots:
      gun_magazine:
        name: Magazine
        startingItem: MantisGunCoreCapgun
        insertSound: /Audio/Weapons/Guns/MagIn/pistol_magin.ogg
        ejectSound: /Audio/Weapons/Guns/MagOut/pistol_magout.ogg
        whitelist:
          tags:
          - MantisGunCoreCapgun
          - MantisGunCoreHoly # Replace
          - MantisGunCoreCryptobiolin # Replace
          - MantisGunCoreMnemolith # Replace
  - type: Appearance
  - type: ItemMapper
    mapLayers:
      mantisguncorecapgun:
        whitelist:
          tags:
          - MantisGunCoreCapgun
      mantisguncoreholy:
        whitelist:
          tags:
          - MantisGunCoreHoly # Replace "Gun"
      mantisguncorecrypto:
        whitelist:
          tags:
          - MantisGunCoreCryptobiolin # Replace "Gun"
      mantisguncoremnemolith:
        whitelist:
          tags:
          - MantisGunCoreMnemolith # Replace "Gun"
    sprite: _DEN/Objects/Weapons/Guns/Battery/mantis-pistol.rsi # Replace "pistol"
  - type: Execution
  - type: MeleeWeapon
    swingLeft: true # Swings from left to right
    wideAnimationRotation: 60 # The butt leads the swing
    soundHit:
      collection: MetalThud
  - type: ThrowingAngle
    angle: -90
    angularVelocity: true
  - type: InteractionVerbs
    allowedVerbs:
    - KissObject
    - LickObject
    - HugObject
  - type: Tag
    tags:
    - Sidearm # Remove on shotgun/SMG
    - MantisBeltStorable
  - type: GuideHelp
    guides: [ MantisGuide ]
  # Shitmed Change
  - type: Drill # Really it's not any surgery tool, but I don't want to unparent it to avoid this
    speed: 1.5  # Fast, because you're shooting them, and if I could make it hurt I would
  - type: SurgeryTool # Shitmed won't be in the rebase anyway, it's fine for now
    endSound:
      path: /Audio/Weapons/Guns/Gunshots/pistol.ogg # God
#  - type: BatterySelfRecharger
#    autoRecharge: true
#    autoRechargeRate: 40

- type: entity
  parent: BaseMantisGun
  id: MantisPistol
  name: mantis pistol # TODO
  description: "A formless concept within the noosphere." # TODO
  abstract: true
  components: # The cells/magazines/cores referenced here are abstract except for the capgun one because they vary per gun for easy balancing
  - type: Sprite
    sprite: _DEN/Objects/Weapons/Guns/Battery/mantis-pistol.rsi # Replace "pistol"
    layers:
    - state: base
      map: ["enum.GunVisualLayers.Base"]
    - state: mag-0
      map: ["enum.GunVisualLayers.Mag"]
  - type: Item
    size: Small # Replace with "Normal" on shotgun/SMG
    shape:
    - 0,0,1,0
    - 0,1,0,1
  - type: Clothing
    sprite: _DEN/Objects/Weapons/Guns/Battery/mantis-pistol.rsi # Replace "pistol"
    quickEquip: false
    slots:
    - Belt # Replace with "Back" on shotgun/SMG
    - suitStorage
  - type: MagazineVisuals
    magState: mag
    steps: 2 # Replace, count the real mag numbers
    zeroVisible: true
  - type: Gun
    fireRate: 2 # Replace, figure it out
    selectedMode:
    - SemiAuto
#    - Burst
#    - FullAuto
    soundGunshot: # Lorewise, they use altered anomaly cores to manifest noospheric concepts as ammunition
      path: /Audio/Weapons/Guns/Gunshots/pistol.ogg # But codewise, they're battery guns that shoot bullets, at least cosmetically
    soundEmpty:
      path: /Audio/_DV/Weapons/Guns/Empty/dry_fire.ogg
  - type: ItemSlots
    slots:
      gun_magazine:
        name: Magazine
        startingItem: MantisGunCoreCapgun
        insertSound: /Audio/Weapons/Guns/MagIn/pistol_magin.ogg # Replace "pistol"
        ejectSound: /Audio/Weapons/Guns/MagOut/pistol_magout.ogg # Replace "pistol"
        whitelist:
          tags:
          - MantisGunCoreCapgun
          - MantisGunCoreHoly # Replace "Gun"
          - MantisGunCoreCryptobiolin # Replace "Gun"
          - MantisGunCoreMnemolith # Replace "Gun"
  - type: Appearance
  - type: ItemMapper
    mapLayers:
      mantisguncorecapgun:
        whitelist:
          tags:
          - MantisGunCoreCapgun
      mantisguncoreholy:
        whitelist:
          tags:
          - MantisGunCoreHoly # Replace "Gun"
      mantisguncorecrypto:
        whitelist:
          tags:
          - MantisGunCoreCryptobiolin # Replace "Gun"
      mantisguncoremnemolith:
        whitelist:
          tags:
          - MantisGunCoreMnemolith # Replace "Gun"
    sprite: _DEN/Objects/Weapons/Guns/Battery/mantis-pistol.rsi # Replace "pistol"
  - type: MeleeWeapon
    swingLeft: true # Swings from left to right
    wideAnimationRotation: 60 # The butt leads the swing
  - type: ThrowingAngle
    angle: -90
    angularVelocity: true
  - type: InteractionVerbs
    allowedVerbs:
    - KissObject
    - LickObject
    - HugObject
  - type: Tag
    tags:
    - Sidearm # Remove on shotgun/SMG
    - MantisBeltStorable
  - type: GuideHelp
    guides: [ MantisGuide ]
  # Shitmed Change
  - type: Drill # Really it's not any surgery tool, but I don't want to unparent it to avoid this
    speed: 1.5  # Fast, because you're shooting them, and if I could make it hurt I would
  - type: SurgeryTool # Shitmed won't be in the rebase anyway, it's fine for now
    endSound:
      path: /Audio/Weapons/Guns/Gunshots/pistol.ogg # God
