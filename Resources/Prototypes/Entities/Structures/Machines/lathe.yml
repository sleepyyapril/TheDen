# SPDX-FileCopyrightText: 2019 DamianX
# SPDX-FileCopyrightText: 2019 L.E.D
# SPDX-FileCopyrightText: 2020 Decappi
# SPDX-FileCopyrightText: 2020 Exp
# SPDX-FileCopyrightText: 2020 Hugo Laloge
# SPDX-FileCopyrightText: 2020 Paul
# SPDX-FileCopyrightText: 2020 Víctor Aguilera Puerto
# SPDX-FileCopyrightText: 2020 lajolico
# SPDX-FileCopyrightText: 2020 py01
# SPDX-FileCopyrightText: 2020 windarkata
# SPDX-FileCopyrightText: 2021 20kdc
# SPDX-FileCopyrightText: 2021 Acruid
# SPDX-FileCopyrightText: 2021 Alex Evgrashin
# SPDX-FileCopyrightText: 2021 MehimoNemo
# SPDX-FileCopyrightText: 2021 Metal Gear Sloth
# SPDX-FileCopyrightText: 2021 SETh lafuente
# SPDX-FileCopyrightText: 2021 SethLafuente
# SPDX-FileCopyrightText: 2021 Swept
# SPDX-FileCopyrightText: 2021 Vera Aguilera Puerto
# SPDX-FileCopyrightText: 2021 iczero
# SPDX-FileCopyrightText: 2022 0x6273
# SPDX-FileCopyrightText: 2022 Andreas Kämper
# SPDX-FileCopyrightText: 2022 Anthemic
# SPDX-FileCopyrightText: 2022 August Eymann
# SPDX-FileCopyrightText: 2022 BubblegumBlue
# SPDX-FileCopyrightText: 2022 Chris V
# SPDX-FileCopyrightText: 2022 CrzyPotato
# SPDX-FileCopyrightText: 2022 Fishfish458
# SPDX-FileCopyrightText: 2022 Flipp Syder
# SPDX-FileCopyrightText: 2022 Francesco
# SPDX-FileCopyrightText: 2022 Jack Fox
# SPDX-FileCopyrightText: 2022 Jacob Tong
# SPDX-FileCopyrightText: 2022 Justin Trotter
# SPDX-FileCopyrightText: 2022 Lamrr
# SPDX-FileCopyrightText: 2022 Lucas
# SPDX-FileCopyrightText: 2022 Moony
# SPDX-FileCopyrightText: 2022 Paul Ritter
# SPDX-FileCopyrightText: 2022 Peptide90
# SPDX-FileCopyrightText: 2022 Rane
# SPDX-FileCopyrightText: 2022 Ripmorld
# SPDX-FileCopyrightText: 2022 Snowni
# SPDX-FileCopyrightText: 2022 Starm4ncer
# SPDX-FileCopyrightText: 2022 T-Stalker
# SPDX-FileCopyrightText: 2022 ZeroDayDaemon
# SPDX-FileCopyrightText: 2022 ZeroDiamond
# SPDX-FileCopyrightText: 2022 fishfish458
# SPDX-FileCopyrightText: 2022 mirrorcult
# SPDX-FileCopyrightText: 2022 zero
# SPDX-FileCopyrightText: 2023 AJCM-git
# SPDX-FileCopyrightText: 2023 AjexRose
# SPDX-FileCopyrightText: 2023 ChilbroBaggins
# SPDX-FileCopyrightText: 2023 Colin-Tel
# SPDX-FileCopyrightText: 2023 Doru991
# SPDX-FileCopyrightText: 2023 ElectroJr
# SPDX-FileCopyrightText: 2023 HerCoyote23
# SPDX-FileCopyrightText: 2023 IntegerTempest
# SPDX-FileCopyrightText: 2023 JJ
# SPDX-FileCopyrightText: 2023 Jeff
# SPDX-FileCopyrightText: 2023 KingFroozy
# SPDX-FileCopyrightText: 2023 Lei Yunxing
# SPDX-FileCopyrightText: 2023 MishaUnity
# SPDX-FileCopyrightText: 2023 Morb
# SPDX-FileCopyrightText: 2023 Nim
# SPDX-FileCopyrightText: 2023 OttoMaticode
# SPDX-FileCopyrightText: 2023 PHCodes
# SPDX-FileCopyrightText: 2023 Puro
# SPDX-FileCopyrightText: 2023 Scribbles0
# SPDX-FileCopyrightText: 2023 Segonist
# SPDX-FileCopyrightText: 2023 Slava0135
# SPDX-FileCopyrightText: 2023 SpartanKadence
# SPDX-FileCopyrightText: 2023 Stanislav4ix
# SPDX-FileCopyrightText: 2023 Tad "Taddy" Johnson
# SPDX-FileCopyrightText: 2023 Tryded
# SPDX-FileCopyrightText: 2023 Tunguso4ka
# SPDX-FileCopyrightText: 2023 Visne
# SPDX-FileCopyrightText: 2023 Vordenburg
# SPDX-FileCopyrightText: 2023 Whisper
# SPDX-FileCopyrightText: 2023 brainfood1183
# SPDX-FileCopyrightText: 2023 c4llv07e
# SPDX-FileCopyrightText: 2023 chromiumboy
# SPDX-FileCopyrightText: 2023 coolmankid12345
# SPDX-FileCopyrightText: 2023 iller_saver
# SPDX-FileCopyrightText: 2023 keronshb
# SPDX-FileCopyrightText: 2023 liltenhead
# SPDX-FileCopyrightText: 2023 lzk228
# SPDX-FileCopyrightText: 2023 nmajask
# SPDX-FileCopyrightText: 2023 ubis1
# SPDX-FileCopyrightText: 2024 12rabbits
# SPDX-FileCopyrightText: 2024 Adrian16199
# SPDX-FileCopyrightText: 2024 Alice "Arimah" Heurlin
# SPDX-FileCopyrightText: 2024 Alpaccalypse
# SPDX-FileCopyrightText: 2024 Alzore
# SPDX-FileCopyrightText: 2024 Angelo Fallaria
# SPDX-FileCopyrightText: 2024 ArZarLordOfMango
# SPDX-FileCopyrightText: 2024 Armok
# SPDX-FileCopyrightText: 2024 Boaz1111
# SPDX-FileCopyrightText: 2024 BramvanZijp
# SPDX-FileCopyrightText: 2024 Brandon Hu
# SPDX-FileCopyrightText: 2024 CaasGit
# SPDX-FileCopyrightText: 2024 Chief-Engineer
# SPDX-FileCopyrightText: 2024 Cojoke
# SPDX-FileCopyrightText: 2024 DEATHB4DEFEAT
# SPDX-FileCopyrightText: 2024 DJB1gYAPPA
# SPDX-FileCopyrightText: 2024 Dakota Haven
# SPDX-FileCopyrightText: 2024 Debug
# SPDX-FileCopyrightText: 2024 DieselMohawk
# SPDX-FileCopyrightText: 2024 Dimastra
# SPDX-FileCopyrightText: 2024 DrSmugleaf
# SPDX-FileCopyrightText: 2024 Ed
# SPDX-FileCopyrightText: 2024 Emisse
# SPDX-FileCopyrightText: 2024 EmoGarbage404
# SPDX-FileCopyrightText: 2024 Eoin Mcloughlin
# SPDX-FileCopyrightText: 2024 Errant
# SPDX-FileCopyrightText: 2024 Fansana
# SPDX-FileCopyrightText: 2024 Flareguy
# SPDX-FileCopyrightText: 2024 Fluffiest Floofers
# SPDX-FileCopyrightText: 2024 FoxxoTrystan
# SPDX-FileCopyrightText: 2024 FungiFellow
# SPDX-FileCopyrightText: 2024 Ghagliiarghii
# SPDX-FileCopyrightText: 2024 Ghost581
# SPDX-FileCopyrightText: 2024 GitHubUser53123
# SPDX-FileCopyrightText: 2024 GreyMario
# SPDX-FileCopyrightText: 2024 HS
# SPDX-FileCopyrightText: 2024 Hannah Giovanna Dawson
# SPDX-FileCopyrightText: 2024 Hanz
# SPDX-FileCopyrightText: 2024 Hrosts
# SPDX-FileCopyrightText: 2024 IProduceWidgets
# SPDX-FileCopyrightText: 2024 Ian
# SPDX-FileCopyrightText: 2024 JIPDawg
# SPDX-FileCopyrightText: 2024 Joel Zimmerman
# SPDX-FileCopyrightText: 2024 John Space
# SPDX-FileCopyrightText: 2024 Julian Giebel
# SPDX-FileCopyrightText: 2024 JustCone
# SPDX-FileCopyrightText: 2024 Kara
# SPDX-FileCopyrightText: 2024 Kevin Zheng
# SPDX-FileCopyrightText: 2024 Killerqu00
# SPDX-FileCopyrightText: 2024 Ko4ergaPunk
# SPDX-FileCopyrightText: 2024 Krunklehorn
# SPDX-FileCopyrightText: 2024 Kukutis96513
# SPDX-FileCopyrightText: 2024 Leon Friedrich
# SPDX-FileCopyrightText: 2024 Lumminal
# SPDX-FileCopyrightText: 2024 Lye
# SPDX-FileCopyrightText: 2024 MACMAN2003
# SPDX-FileCopyrightText: 2024 Menshin
# SPDX-FileCopyrightText: 2024 MerrytheManokit
# SPDX-FileCopyrightText: 2024 Mervill
# SPDX-FileCopyrightText: 2024 Minty642
# SPDX-FileCopyrightText: 2024 MisterMecky
# SPDX-FileCopyrightText: 2024 Mnemotechnican
# SPDX-FileCopyrightText: 2024 Moomoobeef
# SPDX-FileCopyrightText: 2024 Mr. 27
# SPDX-FileCopyrightText: 2024 MureixloI
# SPDX-FileCopyrightText: 2024 NULL882
# SPDX-FileCopyrightText: 2024 Nairod
# SPDX-FileCopyrightText: 2024 NakataRin
# SPDX-FileCopyrightText: 2024 Nemanja
# SPDX-FileCopyrightText: 2024 Neptune
# SPDX-FileCopyrightText: 2024 OrangeMoronage9622
# SPDX-FileCopyrightText: 2024 PJBot
# SPDX-FileCopyrightText: 2024 Partmedia
# SPDX-FileCopyrightText: 2024 Pierson Arnold
# SPDX-FileCopyrightText: 2024 Pieter-Jan Briers
# SPDX-FileCopyrightText: 2024 Plykiya
# SPDX-FileCopyrightText: 2024 PopGamer46
# SPDX-FileCopyrightText: 2024 Preston Smith
# SPDX-FileCopyrightText: 2024 Psychpsyo
# SPDX-FileCopyrightText: 2024 PursuitInAshes
# SPDX-FileCopyrightText: 2024 QueerNB
# SPDX-FileCopyrightText: 2024 Remuchi
# SPDX-FileCopyrightText: 2024 Repo
# SPDX-FileCopyrightText: 2024 RiceMar1244
# SPDX-FileCopyrightText: 2024 Rouge2t7
# SPDX-FileCopyrightText: 2024 RumiTiger
# SPDX-FileCopyrightText: 2024 Saphire Lattice
# SPDX-FileCopyrightText: 2024 ScarKy0
# SPDX-FileCopyrightText: 2024 Scruq445
# SPDX-FileCopyrightText: 2024 ShadowCommander
# SPDX-FileCopyrightText: 2024 Simon
# SPDX-FileCopyrightText: 2024 SimpleStation14
# SPDX-FileCopyrightText: 2024 SlamBamActionman
# SPDX-FileCopyrightText: 2024 SleepyScarecrow
# SPDX-FileCopyrightText: 2024 Spessmann
# SPDX-FileCopyrightText: 2024 Squishy77
# SPDX-FileCopyrightText: 2024 Stalen
# SPDX-FileCopyrightText: 2024 TakoDragon
# SPDX-FileCopyrightText: 2024 Tayrtahn
# SPDX-FileCopyrightText: 2024 Teemu Kauhanen
# SPDX-FileCopyrightText: 2024 Truoizys
# SPDX-FileCopyrightText: 2024 TsjipTsjip
# SPDX-FileCopyrightText: 2024 Ubaser
# SPDX-FileCopyrightText: 2024 Unisol
# SPDX-FileCopyrightText: 2024 Unkn0wn_Gh0st
# SPDX-FileCopyrightText: 2024 Vasilis
# SPDX-FileCopyrightText: 2024 Vigers Ray
# SPDX-FileCopyrightText: 2024 VividPups
# SPDX-FileCopyrightText: 2024 WarMechanic
# SPDX-FileCopyrightText: 2024 Winkarst
# SPDX-FileCopyrightText: 2024 XavierSomething
# SPDX-FileCopyrightText: 2024 a_person
# SPDX-FileCopyrightText: 2024 amatwiedle
# SPDX-FileCopyrightText: 2024 beck-thompson
# SPDX-FileCopyrightText: 2024 coolboy911
# SPDX-FileCopyrightText: 2024 cynical
# SPDX-FileCopyrightText: 2024 deathride58
# SPDX-FileCopyrightText: 2024 deepdarkdepths
# SPDX-FileCopyrightText: 2024 dffdff2423
# SPDX-FileCopyrightText: 2024 eoineoineoin
# SPDX-FileCopyrightText: 2024 foboscheshir
# SPDX-FileCopyrightText: 2024 fox
# SPDX-FileCopyrightText: 2024 github-actions[bot]
# SPDX-FileCopyrightText: 2024 iNVERTED
# SPDX-FileCopyrightText: 2024 icekot8
# SPDX-FileCopyrightText: 2024 lapatison
# SPDX-FileCopyrightText: 2024 lunarcomets
# SPDX-FileCopyrightText: 2024 lzk
# SPDX-FileCopyrightText: 2024 medabunny
# SPDX-FileCopyrightText: 2024 metalgearsloth
# SPDX-FileCopyrightText: 2024 nikthechampiongr
# SPDX-FileCopyrightText: 2024 ninruB
# SPDX-FileCopyrightText: 2024 osjarw
# SPDX-FileCopyrightText: 2024 plykiya
# SPDX-FileCopyrightText: 2024 saintmuntzer
# SPDX-FileCopyrightText: 2024 shamp
# SPDX-FileCopyrightText: 2024 sleepyyapril
# SPDX-FileCopyrightText: 2024 stellar-novas
# SPDX-FileCopyrightText: 2024 strO0pwafel
# SPDX-FileCopyrightText: 2024 stroopwafel
# SPDX-FileCopyrightText: 2024 takemysoult
# SPDX-FileCopyrightText: 2024 themias
# SPDX-FileCopyrightText: 2024 to4no_fix
# SPDX-FileCopyrightText: 2024 unknown
# SPDX-FileCopyrightText: 2024 voidnull000
# SPDX-FileCopyrightText: 2024 yglop
# SPDX-FileCopyrightText: 2024 zelezniciar1
# SPDX-FileCopyrightText: 2024 Арт
# SPDX-FileCopyrightText: 2025 Aiden
# SPDX-FileCopyrightText: 2025 Aidenkrz
# SPDX-FileCopyrightText: 2025 Aineias1
# SPDX-FileCopyrightText: 2025 AirFryerBuyOneGetOneFree
# SPDX-FileCopyrightText: 2025 ArtisticRoomba
# SPDX-FileCopyrightText: 2025 Aviu00
# SPDX-FileCopyrightText: 2025 Blitz
# SPDX-FileCopyrightText: 2025 BlitzTheSquishy
# SPDX-FileCopyrightText: 2025 Blu
# SPDX-FileCopyrightText: 2025 BombasterDS
# SPDX-FileCopyrightText: 2025 BombasterDS2
# SPDX-FileCopyrightText: 2025 Comet.Void
# SPDX-FileCopyrightText: 2025 CometVoid
# SPDX-FileCopyrightText: 2025 Eagle-0
# SPDX-FileCopyrightText: 2025 EctoplasmIsGood
# SPDX-FileCopyrightText: 2025 Eris
# SPDX-FileCopyrightText: 2025 FaDeOkno
# SPDX-FileCopyrightText: 2025 Fishbait
# SPDX-FileCopyrightText: 2025 GoobBot
# SPDX-FileCopyrightText: 2025 Ilya246
# SPDX-FileCopyrightText: 2025 Jakumba
# SPDX-FileCopyrightText: 2025 JoeHammad1844
# SPDX-FileCopyrightText: 2025 K-Dynamic
# SPDX-FileCopyrightText: 2025 KekaniCreates
# SPDX-FileCopyrightText: 2025 MajorMoth
# SPDX-FileCopyrightText: 2025 McBosserson
# SPDX-FileCopyrightText: 2025 Milon
# SPDX-FileCopyrightText: 2025 Piras314
# SPDX-FileCopyrightText: 2025 RatherUncreative
# SPDX-FileCopyrightText: 2025 Rosycup
# SPDX-FileCopyrightText: 2025 Rouden
# SPDX-FileCopyrightText: 2025 SX-7
# SPDX-FileCopyrightText: 2025 SX_7
# SPDX-FileCopyrightText: 2025 Savante-Sam
# SPDX-FileCopyrightText: 2025 Skubman
# SPDX-FileCopyrightText: 2025 Solaris
# SPDX-FileCopyrightText: 2025 Solstice
# SPDX-FileCopyrightText: 2025 Southbridge
# SPDX-FileCopyrightText: 2025 Spatison
# SPDX-FileCopyrightText: 2025 Speebro
# SPDX-FileCopyrightText: 2025 Steve
# SPDX-FileCopyrightText: 2025 Stop-Signs
# SPDX-FileCopyrightText: 2025 Tabitha
# SPDX-FileCopyrightText: 2025 Ted Lukin
# SPDX-FileCopyrightText: 2025 TheBorzoiMustConsume
# SPDX-FileCopyrightText: 2025 Theodore Lukin
# SPDX-FileCopyrightText: 2025 Thom
# SPDX-FileCopyrightText: 2025 Thomas
# SPDX-FileCopyrightText: 2025 Timfa
# SPDX-FileCopyrightText: 2025 Unlumination
# SPDX-FileCopyrightText: 2025 VMSolidus
# SPDX-FileCopyrightText: 2025 Velken
# SPDX-FileCopyrightText: 2025 Will-Oliver-Br
# SPDX-FileCopyrightText: 2025 Your Name
# SPDX-FileCopyrightText: 2025 coderabbitai[bot]
# SPDX-FileCopyrightText: 2025 deltanedas
# SPDX-FileCopyrightText: 2025 dootythefrooty
# SPDX-FileCopyrightText: 2025 fishbait
# SPDX-FileCopyrightText: 2025 gluesniffler
# SPDX-FileCopyrightText: 2025 hivehum
# SPDX-FileCopyrightText: 2025 kosticia
# SPDX-FileCopyrightText: 2025 marc-pelletier
# SPDX-FileCopyrightText: 2025 mart
# SPDX-FileCopyrightText: 2025 pathetic meowmeow
# SPDX-FileCopyrightText: 2025 portfiend
# SPDX-FileCopyrightText: 2025 slarticodefast
# SPDX-FileCopyrightText: 2025 username
# SPDX-FileCopyrightText: 2025 whateverusername0
#
# SPDX-License-Identifier: AGPL-3.0-or-later AND MIT

- type: entity
  id: BaseLathe
  parent: [ BaseMachinePowered, ConstructibleMachine ]
  abstract: true
  name: lathe
  components:
  - type: Appearance
  - type: WiresVisuals
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.4,-0.4,0.4,0.4"
        density: 190
        mask:
        - MachineMask
        layer:
          - MachineLayer
  - type: Lathe
  - type: MaterialStorage
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 100
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:ChangeConstructionNodeBehavior
        node: machineFrame
      - !type:DoActsBehavior
        acts: ["Destruction"]
  - type: WiresPanel
  - type: ActivatableUI
    key: enum.LatheUiKey.Key
  - type: ActivatableUIRequiresPower
  - type: UserInterface
    interfaces:
      enum.LatheUiKey.Key:
        type: LatheBoundUserInterface
      enum.ResearchClientUiKey.Key:
        type: ResearchClientBoundUserInterface
  - type: Transform
    anchored: true
  - type: Pullable
  - type: StaticPrice
    price: 800
  - type: ResearchClient
  - type: TechnologyDatabase
  - type: Speech # Goobstation - Lathe message on recipes update
    speechSounds: Lathe
  - type: AutomationSlots # Goobstation
    slots:
    - !type:AutomatedMaterialStorage
      input: AutomationSlotMaterials
      output: null

# a lathe that can be sped up with space lube / slowed down with glue
- type: entity
  abstract: true
  parent: BaseLathe
  id: BaseLatheLube
  components:
  - type: ReagentSpeed
    solution: lube
    modifiers:
      SpaceLube: 0.25
      SpaceGlue: 5
  - type: SolutionContainerManager
    solutions:
      lube:
        maxVol: 250
  - type: Spillable
    solution: lube
  - type: RefillableSolution
    solution: lube
  - type: ExaminableSolution
    solution: lube

- type: entity
  abstract: true
  id: BaseHyperlathe
  components:
  - type: Lathe
    materialUseMultiplier: 0.5
    timeMultiplier: 1.5
  - type: LatheHeatProducing
  - type: ReagentSpeed
    modifiers:
      SpaceLube: 0.8 # being faster means less heat so lube needs to be nerfed
      SpaceGlue: 5 # no change from normal lathe, overheat!!!

- type: entity
  id: Autolathe
  parent: [BaseLatheLube, BaseMaterialSiloUtilizer]
  name: autolathe
  description: It produces basic items using metal and glass.
  components:
  - type: Sprite
    sprite: Structures/Machines/autolathe.rsi
    snapCardinals: true
    layers:
    - state: icon
      map: ["enum.LatheVisualLayers.IsRunning"]
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
    - state: inserting
      map: ["enum.MaterialStorageVisualLayers.Inserting"]
    - state: panel
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: Machine
    board: AutolatheMachineCircuitboard
  - type: MaterialStorage
    whitelist:
      tags:
      - Sheet
      - RawMaterial
      - Ingot
      - Wooden
      - ClothMade
      - Gauze
      - Metal
  - type: Lathe
    idleState: icon
    runningState: building
    staticPacks:
    - AutolatheStaticAwfulDen
  - type: EmagLatheRecipes
    emagStaticPacks:
    - AutolatheEmagStaticAwfulDen

- type: entity
  id: AutolatheHyperConvection
  parent: [Autolathe, BaseHyperlathe]
  name: hyper convection autolathe
  description: A highly-experimental autolathe that harnesses the power of extreme heat to slowly create objects more cost-effectively.
  components:
  - type: Sprite
    sprite: Structures/Machines/autolathe_hypercon.rsi
  - type: Machine
    board: AutolatheHyperConvectionMachineCircuitboard

- type: entity
  id: Protolathe
  parent: [BaseLatheLube, BaseMaterialSiloUtilizer]
  name: protolathe
  description: Converts raw materials into advanced items.
  components:
  - type: Sprite
    sprite: Structures/Machines/protolathe.rsi
    snapCardinals: true
    layers:
    - state: icon
      map: ["enum.LatheVisualLayers.IsRunning"]
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
    - state: inserting
      map: ["enum.MaterialStorageVisualLayers.Inserting"]
    - state: panel
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: Machine
    board: ProtolatheMachineCircuitboard
  - type: MaterialStorage
    whitelist:
      tags:
      - Sheet
      - RawMaterial
      - Ingot
      - Wooden
      - ClothMade
      - Gauze
      - Metal
      - Diamond
  - type: Lathe
    idleState: icon
    runningState: building
    staticPacks:
    - ProtolatheStaticAwfulDen
    dynamicPacks:
    - ProtolatheDynamicAwfulDen
  - type: EmagLatheRecipes
    emagStaticPacks:
    - ProtolatheStaticEmagAwfulDen
    emagDynamicPacks:
    - ProtolatheDynamicEmagAwfulDen

- type: entity
  id: ProtolatheHyperConvection
  parent: [Protolathe, BaseHyperlathe]
  name: hyper convection protolathe
  description: A highly-experimental protolathe that harnesses the power of extreme heat to slowly create objects more cost-effectively.
  components:
  - type: Sprite
    sprite: Structures/Machines/protolathe_hypercon.rsi
  - type: Machine
    board: ProtolatheHyperConvectionMachineCircuitboard

- type: entity
  id: CircuitImprinter
  parent: [BaseLatheLube, BaseMaterialSiloUtilizer]
  name: circuit imprinter
  description: Prints circuit boards for machines.
  components:
  - type: Sprite
    sprite: Structures/Machines/circuit_imprinter.rsi
    snapCardinals: true
    layers:
    - state: icon
      map: ["enum.LatheVisualLayers.IsRunning"]
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
    - state: panel
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: Machine
    board: CircuitImprinterMachineCircuitboard
  - type: Lathe
    producingSound: /Audio/Machines/circuitprinter.ogg
    idleState: icon
    runningState: building
    staticPacks:
    - CircuitImprinterStaticAwfulDen
    dynamicPacks:
    - CircuitImprinterDynamicAwfulDen
  - type: EmagLatheRecipes
    emagDynamicPacks:
    - CircuitImprinterDynamicEmagAwfulDen
  - type: MaterialStorage
    whitelist:
      tags:
      - Sheet
      - RawMaterial
      - Ingot
      - Wooden
      - ClothMade
      - Gauze
      - Metal
  - type: RequireProjectileTarget

- type: entity
  id: CircuitImprinterHyperConvection
  parent: [CircuitImprinter, BaseHyperlathe]
  name: hyper convection circuit imprinter
  description: A highly-experimental circuit imprinter that harnesses the power of extreme heat to slowly create objects more cost-effectively.
  components:
  - type: Sprite
    sprite: Structures/Machines/circuit_imprinter_hypercon.rsi
  - type: Machine
    board: CircuitImprinterHyperConvectionMachineCircuitboard

- type: entity
  id: ExosuitFabricator
  parent: [BaseLatheLube, BaseMaterialSiloUtilizer]
  name: exosuit fabricator
  description: Creates parts for robotics and other mechanical needs
  components:
  - type: Sprite
    sprite: Structures/Machines/exosuit_fabricator.rsi
    layers:
    - state: fab-idle
      map: ["enum.LatheVisualLayers.IsRunning"]
    - state: fab-load
      map: ["enum.MaterialStorageVisualLayers.Inserting"]
    - state: fab-o
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: Machine
    board: ExosuitFabricatorMachineCircuitboard
  - type: Lathe
    idleState: fab-idle
    runningState: fab-active
    staticPacks:
    - ExosuitFabricatorStaticAwfulDen
    dynamicPacks:
    - ExosuitFabricatorDynamicAwfulDen
  - type: EmagLatheRecipes
    emagDynamicPacks:
    - ExosuitFabricatorDynamicEmagAwfulDen

  - type: MaterialStorage
    whitelist:
      tags:
      - Sheet
      - RawMaterial
      - Ingot
      - Wooden
      - ClothMade
      - Gauze
      - Metal
      - Diamond
  - type: GuideHelp
    guides:
    - Robotics

- type: entity
  id: Biofabricator
  parent: [BaseLathe, BaseMaterialSiloUtilizer]
  name: biofabricator
  description: Produces animal cubes using biomass.
  components:
  - type: Sprite
    sprite: Structures/Machines/biofabricator.rsi
    snapCardinals: true
    layers:
    - state: icon
      map: ["enum.LatheVisualLayers.IsRunning"]
      color: "#ffaa99"
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
      color: "#ffaaaa"
    - state: inserting
      map: ["enum.MaterialStorageVisualLayers.Inserting"]
      color: "#ffaaaa"
    - state: panel
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: Machine
    board: BiofabricatorMachineCircuitboard
  - type: MaterialStorage
    ignoreColor: true
    whitelist:
      tags:
      - Sheet
      - RawMaterial
      - Ingot
      - Wooden
      - ClothMade
      - Gauze
      - Metal
  - type: Lathe
    idleState: icon
    runningState: building
    staticPacks:
    - BiofabricatorStaticAwfulDen
  - type: EmagLatheRecipes
    emagStaticPacks:
    - BiofabricatorEmagStaticAwfulDen

- type: entity
  id: SecurityTechFab
  parent: [BaseLatheLube, BaseMaterialSiloUtilizer]
  name: security techfab
  description: Prints equipment for use by security crew.
  components:
  - type: Sprite
    sprite: Structures/Machines/techfab.rsi
    layers:
    - state: icon
      map: ["enum.LatheVisualLayers.IsRunning"]
    - state: sec
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
    - state: inserting
      map: ["enum.MaterialStorageVisualLayers.Inserting"]
    - state: panel
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: Machine
    board: SecurityTechFabCircuitboard
  - type: LatheAnnouncing
    channels: [Security]
  - type: Lathe
    idleState: icon
    runningState: icon
    staticPacks:
    - SecurityTechFabStaticAwfulDen
    dynamicPacks:
    - SecurityTechFabDynamicAwfulDen
  - type: MaterialStorage
    whitelist:
      tags:
      - Sheet
      - RawMaterial
      - Ingot
      - Wooden
      - ClothMade
      - Gauze
      - Metal
      - Diamond

- type: entity
  id: AmmoTechFab
  parent: [BaseLatheLube, BaseMaterialSiloUtilizer]
  name: ammo techfab
  description: Prints the bare minimum of bullets that any budget military or armory could need. Nothing fancy.
  components:
    - type: Sprite
      sprite: Structures/Machines/techfab.rsi
      layers:
        - state: icon
          map: ["enum.LatheVisualLayers.IsRunning"]
        - state: ammo
        - state: unlit
          shader: unshaded
          map: ["enum.PowerDeviceVisualLayers.Powered"]
        - state: inserting
          map: ["enum.MaterialStorageVisualLayers.Inserting"]
        - state: panel
          map: ["enum.WiresVisualLayers.MaintenancePanel"]
    - type: Machine
      board: AmmoTechFabCircuitboard
    - type: Lathe
      idleState: icon
      runningState: icon
      staticPacks:
      - AmmoTechFabStaticAwfulDen
    - type: MaterialStorage
      whitelist:
        tags:
          - Sheet
          - RawMaterial
          - Ingot
          - Wooden
          - ClothMade
          - Gauze
          - Metal

- type: entity
  id: MedicalTechFab
  parent: [BaseLatheLube, BaseMaterialSiloUtilizer]
  name: medical techfab
  description: Prints equipment for use by the medbay.
  components:
  - type: Sprite
    sprite: Structures/Machines/techfab.rsi
    layers:
    - state: icon
      map: ["enum.LatheVisualLayers.IsRunning"]
    - state: med
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
    - state: inserting
      map: ["enum.MaterialStorageVisualLayers.Inserting"]
    - state: panel
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: LatheAnnouncing
    channels: [Medical]
  - type: Lathe
    idleState: icon
    runningState: icon
    staticPacks:
    - MedicalTechFabStaticAwfulDen
    dynamicPacks:
    - MedicalTechFabDynamicAwfulDen
  - type: Machine
    board: MedicalTechFabCircuitboard
  - type: StealTarget
    stealGroup: MedicalTechFabCircuitboard

# THIS ENTIRE SECTION BELONGS TO FLOOF - port to EE if possible
# ===

- type: entity
  id: EngineeringTechFab
  parent: [BaseLatheLube, BaseMaterialSiloUtilizer]
  name: engineering techfab
  description: An improved version of the autolathe, capable of printing various tools used by engineers.
  components:
  - type: Sprite
    sprite: Structures/Machines/techfab.rsi
    layers:
    - state: icon
      map: ["enum.LatheVisualLayers.IsRunning"]
    - state: engi
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
    - state: inserting
      map: ["enum.MaterialStorageVisualLayers.Inserting"]
    - state: panel
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: Machine
    board: EngineeringTechFabCircuitboard
  - type: LatheAnnouncing
    channels: [Engineering]
  - type: Lathe
    idleState: icon
    runningState: icon
    staticPacks:
    - EngineeringTechFabStaticAwfulDen
    - AutolatheStaticAwfulDen
    dynamicPacks:
    - EngineeringTechFabDynamicAwfulDen
  - type: MaterialStorage
    whitelist:
      tags:
      - Sheet
      - RawMaterial
      - Ingot

- type: entity
  id: CargoTechFab
  parent: [BaseLatheLube, BaseMaterialSiloUtilizer]
  name: logistics techfab
  description: An improved version of the autolathe, capable of printing various tools used by salvage and cargo technicians.
  components:
  - type: Sprite
    sprite: Structures/Machines/techfab.rsi
    layers:
    - state: icon
      map: ["enum.LatheVisualLayers.IsRunning"]
    - state: cargo
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
    - state: inserting
      map: ["enum.MaterialStorageVisualLayers.Inserting"]
    - state: panel
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: Machine
    board: CargoTechFabCircuitboard
  - type: LatheAnnouncing
    channels: [Supply]
  - type: Lathe
    idleState: icon
    runningState: icon
    staticPacks:
    - AutolatheStaticAwfulDen
    - CargoTechFabStaticAwfulDen
    dynamicPacks:
    - CargoTechFabDynamicAwfulDen
  - type: MaterialStorage
    alwaysAcceptMaterials: true

- type: entity
  id: ServiceTechFab
  parent: [BaseLatheLube, BaseMaterialSiloUtilizer]
  name: service techfab
  description: A specialized techfab used for printing various quality-of-life tools.
  components:
  - type: Sprite
    sprite: Structures/Machines/techfab.rsi
    layers:
    - state: icon
      map: ["enum.LatheVisualLayers.IsRunning"]
    - state: service
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
    - state: inserting
      map: ["enum.MaterialStorageVisualLayers.Inserting"]
    - state: panel
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: Machine
    board: ServiceTechFabCircuitboard
  - type: LatheAnnouncing
    channels: [Service]
  - type: Lathe
    idleState: icon
    runningState: icon
    staticPacks:
    - ServiceTechFabStaticAwfulDen
    dynamicPacks:
    - ServiceTechFabDynamicAwfulDen
  - type: MaterialStorage
    whitelist:
      tags:
      - Sheet
      - RawMaterial
      - Ingot

# ===
# Floof section end

- type: entity
  parent: [BaseLathe, BaseMaterialSiloUtilizer]
  id: UniformPrinter
  name: uniform printer
  description: Prints new or replacement uniforms.
  components:
  - type: Transform
    noRot: false
  - type: Sprite
    sprite: Structures/Machines/uniform_printer.rsi
    snapCardinals: false
    layers:
    - state: icon
      map: ["enum.LatheVisualLayers.IsRunning"]
  - type: Machine
    board: UniformPrinterMachineCircuitboard
  - type: Lathe
    producingSound: /Audio/Machines/uniformprinter.ogg
    idleState: icon
    runningState: building
    staticPacks:
    - UniformPrinterStaticAwfulDen
  - type: EmagLatheRecipes
    emagStaticPacks:
    - UniformPrinterEmagStaticAwfulDen
  - type: MaterialStorage
    whitelist:
      tags:
      - Sheet
      - RawMaterial
      - Ingot
      - Wooden
      - ClothMade
      - Gauze
      - Metal

- type: entity
  id: Biogenerator
  parent: BaseLathe
  name: biogenerator
  description: Converts plants into biomass, which can be used to construct useful items.
  components:
  - type: Sprite
    sprite: Structures/Machines/biofabricator.rsi
    snapCardinals: true
    layers:
    - state: icon
      map: ["enum.LatheVisualLayers.IsRunning"]
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
    - state: inserting
      map: ["enum.MaterialStorageVisualLayers.Inserting"]
    - state: panel
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: Machine
    board: BiogeneratorMachineCircuitboard
  - type: MaterialStorage
  - type: ProduceMaterialExtractor
  - type: ItemSlots
    slots:
      beaker_slot:
        name: lathe-component-output-slot-beaker-name
        whitelist:
          components:
          - FitsInDispenser
  - type: ContainerContainer
    containers:
      machine_board: !type:Container
      machine_parts: !type:Container
      beaker_slot: !type:ContainerSlot
  - type: Lathe
    reagentOutputSlotId: beaker_slot
    idleState: icon
    runningState: building
    staticPacks:
    - BiogeneratorStaticAwfulDen

- type: entity
  parent: [BaseLathe, BaseMaterialSiloUtilizer]
  id: OreProcessor
  name: ore processor
  description: It produces sheets and ingots using ores.
  components:
  - type: Sprite
    sprite: Structures/Machines/ore_processor.rsi
    layers:
    - state: icon
      map: ["enum.LatheVisualLayers.IsRunning"]
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
    - state: inserting
      map: ["enum.MaterialStorageVisualLayers.Inserting"]
    - state: panel
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: Machine
    board: OreProcessorMachineCircuitboard
  - type: MaterialStorage
    ignoreColor: true
    whitelist:
      tags:
      - Ore
  - type: Lathe
    idleState: icon
    runningState: building
    defaultProductionAmount: 10
    staticPacks:
    - OreProcessorStaticAwfulDen
  - type: MaterialStorageMagnetPickup # Delta V - Summary: Adds magnet pull from Frontier
    magnetEnabled: True
    range: 0.30 # Delta V - End Magnet Pull
  - type: MiningPoints # DeltaV - Source of mining points for miners
    transferSound:
      path: /Audio/Effects/Cargo/ping.ogg
  - type: MiningPointsLathe # DeltaV

- type: entity
  parent: OreProcessor
  id: OreProcessorIndustrial
  name: industrial ore processor
  description: An ore processor specifically designed for mass-producing metals in industrial applications.
  components:
  - type: Sprite
    sprite: Structures/Machines/ore_processor_industrial.rsi
  - type: Machine
    board: OreProcessorIndustrialMachineCircuitboard
  - type: Lathe
    materialUseMultiplier: 0.75
    timeMultiplier: 0.5

- type: entity
  parent: [BaseLathe, BaseMaterialSiloUtilizer]
  id: Sheetifier
  name: sheet-meister 2000
  description: A very sheety machine.
  components:
  - type: Sprite
    sprite: Structures/Machines/sheetifier.rsi
    layers:
    - state: base_machine
      map: ["enum.LatheVisualLayers.IsRunning"]
    - state: buttons_on
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
  - type: Machine
    board: SheetifierMachineCircuitboard
  - type: MaterialStorage
    dropOnDeconstruct: false #should drop ores instead of ingots/sheets
    ignoreColor: true
    canEjectStoredMaterials: false
    whitelist:
      tags:
      - Raw
      - Wooden
  - type: Lathe
    idleState: base_machine
    runningState: base_machine_processing
    staticPacks:
    - SheetifierStaticAwfulDen

- type: entity
  parent: [BaseLathe, BaseMaterialSiloUtilizer]
  id: PrizeCounter
  name: prize counter
  description: Claim your prize and win some toys and cute plushies!
  components:
  - type: AmbientOnPowered
  - type: AmbientSound
    volume: -9
    range: 3
    enabled: false
    sound:
      path: /Audio/Ambience/Objects/vending_machine_hum.ogg
  - type: LitOnPowered
  - type: ApcPowerReceiver
    powerLoad: 200
  # - type: Advertise
  #   pack: CuddlyCritterAds # TODO Change this
  - type: PointLight
    radius: 1.5
    energy: 1.6
    color: "#4b93ad"
  - type: Transform
    noRot: false
  - type: Sprite
    sprite: Structures/Machines/prizecounter.rsi
    snapCardinals: true
    layers:
    - state: icon
      map: ["enum.LatheVisualLayers.IsRunning"]
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
    - state: panel
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: Lathe
    idleState: icon
    runningState: icon
    staticPacks:
    - PrizeCounterStaticAwfulDen
  - type: EmagLatheRecipes
    emagStaticPacks:
    - PrizeCounterEmagStaticAwfulDen
  - type: MaterialStorage
    whitelist:
      tags:
        - PrizeTicket

- type: entity
  parent: BaseLathe
  id: CutterMachine
  name: cutter machine
  description: This is a cutter. It cuts. Add variety to your station floor with eye-pleasing patterns! Don't stick your fingers in.
  components:
  - type: Transform
    noRot: false
  - type: Sprite
    sprite: Structures/Machines/cuttermachine.rsi
    snapCardinals: true
    layers:
    - state: icon
      map: ["enum.LatheVisualLayers.IsRunning"]
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
    - state: panel
      map: ["enum.WiresVisualLayers.MaintenancePanel"]
  - type: Machine
    board: CutterMachineCircuitboard
  - type: Lathe
    producingSound: /Audio/Machines/cutter.ogg
    idleState: icon
    runningState: building
    staticPacks:
    - CutterMachineStaticAwfulDen
  - type: MaterialStorage
    whitelist:
      tags:
        - Sheet
        - Metal
        - Wooden
        - RawMaterial
        - Plastic
        - Ingot
